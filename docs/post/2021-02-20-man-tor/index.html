<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Man Tor - v2how</title>
  <meta name="description" content="NAME tor - The second-generation onion router
SYNOPSIS tor [OPTION value]&hellip;
DESCRIPTION Tor is a connection-oriented anonymizing communication service. Users choose a source-routed path through a set of nodes, and negotiate a &ldquo;virtual circuit&rdquo; through the network, in which each node knows its predecessor and successor, but no others. Traffic flowing down the circuit is unwrapped by a symmetric key at each node, which reveals the downstream node.
Basically, Tor provides a distributed network of servers or relays (&ldquo;onion routers&rdquo;).">
  <meta name="author" content="Amy"/><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "v2how",
    
    "url": "https:\/\/v2how.github.io"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https:\/\/v2how.github.io"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https:\/\/v2how.github.io",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https:\/\/v2how.github.io\/post\/2021-02-20-man-tor\/",
          "name": "Man tor"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : "Amy"
  },
  "headline": "Man Tor",
  "description" : "NAME tor - The second-generation onion router\nSYNOPSIS tor [OPTION value]\u0026hellip;\nDESCRIPTION Tor is a connection-oriented anonymizing communication service. Users choose a source-routed path through a set of nodes, and negotiate a \u0026ldquo;virtual circuit\u0026rdquo; through the network, in which each node knows its predecessor and successor, but no others. Traffic flowing down the circuit is unwrapped by a symmetric key at each node, which reveals the downstream node.\nBasically, Tor provides a distributed network of servers or relays (\u0026ldquo;onion routers\u0026rdquo;).",
  "inLanguage" : "en",
  "wordCount":  25049 ,
  "datePublished" : "2021-02-20T00:00:00",
  "dateModified" : "2021-02-20T00:00:00",
  "image" : "https:\/\/v2how.github.io\/images\/amy-avatar-icon.png",
  "keywords" : [ "tor" ],
  "mainEntityOfPage" : "https:\/\/v2how.github.io\/post\/2021-02-20-man-tor\/",
  "publisher" : {
    "@type": "Organization",
    "name" : "https:\/\/v2how.github.io",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "https:\/\/v2how.github.io\/images\/amy-avatar-icon.png",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>

<meta property="og:title" content="Man Tor" />
<meta property="og:description" content="NAME tor - The second-generation onion router
SYNOPSIS tor [OPTION value]&hellip;
DESCRIPTION Tor is a connection-oriented anonymizing communication service. Users choose a source-routed path through a set of nodes, and negotiate a &ldquo;virtual circuit&rdquo; through the network, in which each node knows its predecessor and successor, but no others. Traffic flowing down the circuit is unwrapped by a symmetric key at each node, which reveals the downstream node.
Basically, Tor provides a distributed network of servers or relays (&ldquo;onion routers&rdquo;).">
<meta property="og:image" content="https://v2how.github.io/images/amy-avatar-icon.png" />
<meta property="og:url" content="https://v2how.github.io/post/2021-02-20-man-tor/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="v2how" />

  <meta name="twitter:title" content="Man Tor" />
  <meta name="twitter:description" content="NAME tor - The second-generation onion router
SYNOPSIS tor [OPTION value]&hellip;
DESCRIPTION Tor is a connection-oriented anonymizing communication service. Users choose a source-routed path through …">
  <meta name="twitter:image" content="https://v2how.github.io/images/amy-avatar-icon.png" />
  <meta name="twitter:card" content="summary" />
  <link href='https://v2how.github.io/images/favicon.ico' rel='icon' type='image/x-icon'/>
  <meta name="generator" content="Hugo 0.80.0" />
  <link rel="alternate" href="https://v2how.github.io/index.xml" type="application/rss+xml" title="v2how"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="https://v2how.github.io/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="https://v2how.github.io/css/highlight.min.css" /><link rel="stylesheet" href="https://v2how.github.io/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">



<script async src="https://www.googletagmanager.com/gtag/js?id=G-SW1P8SGNST"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SW1P8SGNST');
</script>


  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://v2how.github.io">v2how</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="About" href="/page/about/">About</a>
            </li>
          
        
          
            <li>
              <a title="Tags" href="/tags">Tags</a>
            </li>
          
        

        

        
      </ul>
    </div>

    
      <div class="avatar-container">
        <div class="avatar-img-border">
          <a title="v2how" href="https://v2how.github.io">
            <img class="avatar-img" src="https://v2how.github.io/images/amy-avatar-icon.png" alt="v2how" />
          </a>
        </div>
      </div>
    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              
                <h1>Man Tor</h1>
              
              
              
              
                <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on February 20, 2021
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;118&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;25049&nbsp;words
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Amy
    
  
  
</span>


              
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        <h2 id="name">NAME</h2>
<p>tor - The second-generation onion router</p>
<h2 id="synopsis">SYNOPSIS</h2>
<p>tor [OPTION value]&hellip;</p>
<h2 id="description">DESCRIPTION</h2>
<p>Tor is a connection-oriented anonymizing communication service. Users choose a source-routed path through a set of nodes, and negotiate a &ldquo;virtual circuit&rdquo; through the network, in which each node knows its predecessor and successor, but no others. Traffic flowing down the circuit is unwrapped by a symmetric key at each node, which reveals the downstream node.</p>
<p>Basically, Tor provides a distributed network of servers or relays (&ldquo;onion routers&rdquo;). Users bounce their TCP streams — web traffic, ftp, ssh, etc. — around the network, and recipients, observers, and even the relays themselves have difficulty tracking the source of the stream.</p>
<p>By default, tor will act as a client only. To help the network by providing bandwidth as a relay, change the ORPort configuration option — see below. Please also consult the documentation on the Tor Project’s website.</p>
<h2 id="command-line-options">COMMAND-LINE OPTIONS</h2>
<p><strong>-h, --help</strong></p>
<p>Display a short help message and exit.</p>
<p><strong>-f FILE</strong></p>
<p>Specify a new configuration file to contain further Tor configuration options OR pass <code>-</code> to make Tor read its configuration from standard input. (Default: <code>/etc/tor/torrc</code>, or <code>$HOME/.torrc</code> if that file is not found)</p>
<p><strong>--allow-missing-torrc</strong></p>
<p>Do not require that configuration file specified by <code>-f</code> exist if default <code>torrc</code> can be accessed.</p>
<p><strong>--defaults-torrc FILE</strong></p>
<p>Specify a file in which to find default values for Tor options. The contents of this file are overridden by those in the regular configuration file, and by those on the command line. (Default: <code>/etc/tor/torrc-defaults</code>.)</p>
<p><strong>--ignore-missing-torrc</strong></p>
<p>Specifies that Tor should treat a missing <code>torrc</code> file as though it were empty. Ordinarily, Tor does this for missing default <code>torrc</code> files, but not for those specified on the command line.</p>
<p><strong>--hash-password PASSWORD</strong></p>
<p>Generates a hashed password for control port access.</p>
<p><strong>--list-fingerprint</strong></p>
<p>Generate your keys and output your nickname and fingerprint.</p>
<p><strong>--verify-config</strong></p>
<p>Verify the configuration file is valid.</p>
<p><strong>--service install [--options command-line options]</strong></p>
<p>Install an instance of Tor as a Windows service, with the provided command-line options. Current instructions can be found at <a href="https://www.torproject.org/docs/faq#NTService">https://www.torproject.org/docs/faq#NTService</a></p>
<p><strong>--service remove|start|stop</strong></p>
<p>Remove, start, or stop a configured Tor Windows service.</p>
<p><strong>--nt-service</strong></p>
<p>Used internally to implement a Windows service.</p>
<p><strong>--list-torrc-options</strong></p>
<p>List all valid options.</p>
<p><strong>--list-deprecated-options</strong></p>
<p>List all valid options that are scheduled to become obsolete in a future version. (This is a warning, not a promise.)</p>
<p><strong>--list-modules</strong></p>
<p>For each optional module, list whether or not it has been compiled into Tor. (Any module not listed is not optional in this version of Tor.)</p>
<p><strong>--version</strong></p>
<p>Display Tor version and exit. The output is a single line of the format <code>Tor version [version number].</code> (The version number format is as specified in <code>version-spec.txt</code>.)</p>
<p><strong>--quiet | --hush</strong></p>
<p>Override the default console log. By default, Tor starts out logging messages at level &ldquo;notice&rdquo; and higher to the console. It stops doing so after it parses its configuration, if the configuration tells it to log anywhere else. You can override this behavior with the <code>--hush</code> option, which tells Tor to only send warnings and errors to the console, or with the <code>--quiet</code> option, which tells Tor not to log to the console at all.</p>
<p><strong>--keygen [--newpass]</strong></p>
<p>Running <code>tor --keygen</code> creates a new ed25519 master identity key for a relay, or only a fresh temporary signing key and certificate, if you already have a master key. Optionally you can encrypt the master identity key with a passphrase: Tor will ask you for one. If you don’t want to encrypt the master key, just don’t enter any passphrase when asked.</p>
<p>The <code>--newpass</code> option should be used with <code>--keygen</code> only when you need to add, change, or remove a passphrase on an existing ed25519 master identity key. You will be prompted for the old passphase (if any), and the new passphrase (if any).</p>
<p>When generating a master key, you will probably want to use <code>--DataDirectory</code> to control where the keys and certificates will be stored, and <code>--SigningKeyLifetime</code> to control their lifetimes. Their behavior is as documented in the server options section below. (You must have write access to the specified DataDirectory.)</p>
<p>To use the generated files, you must copy them to the <code>DataDirectory/keys</code> directory of your Tor daemon, and make sure that they are owned by the user actually running the Tor daemon on your system.</p>
<p><strong>--passphrase-fd FILEDES</strong></p>
<p>Filedescriptor to read the passphrase from. Note that unlike with the <code>tor-gencert</code> program, the entire file contents are read and used as the passphrase, including any trailing newlines. Default: read from the terminal.</p>
<p><strong>--key-expiration [purpose]</strong></p>
<p>The purpose specifies which type of key certificate to determine the expiration of. The only currently recognised purpose is &ldquo;sign&rdquo;.</p>
<p>Running <code>tor --key-expiration sign</code> will attempt to find your signing key certificate and will output, both in the logs as well as to stdout, the signing key certificate’s expiration time in ISO-8601 format. For example, the output sent to stdout will be of the form: <code>signing-cert-expiry: 2017-07-25 08:30:15 UTC</code></p>
<p>Other options can be specified on the command-line in the format <code>--option value</code>, in the format <code>option value</code>, or in a configuration file. For instance, you can tell Tor to start listening for SOCKS connections on port 9999 by passing <code>--SocksPort 9999</code> or <code>SocksPort 9999</code> to it on the command line, or by putting <code>SocksPort 9999</code> in the configuration file. You will need to quote options with spaces in them: if you want Tor to log all debugging messages to <code>debug.log</code>, you will probably need to say <code>--Log &quot;debug file debug.log&quot;</code>.</p>
<p>Options on the command line override those in configuration files. See the next section for more information.</p>
<h2 id="the-configuration-file-format">THE CONFIGURATION FILE FORMAT</h2>
<p>All configuration options in a configuration are written on a single line by default. They take the form of an option name and a value, or an option name and a quoted value (<code>option value</code> or <code>option &quot;value&quot;</code>). Anything after a <code>#</code> character is treated as a comment. Options are case-insensitive. C-style escaped characters are allowed inside quoted values. To split one configuration entry into multiple lines, use a single backslash character (<code>\</code>) before the end of the line. Comments can be used in such multiline entries, but they must start at the beginning of a line.</p>
<p>Configuration options can be imported from files or folders using the <code>%include</code> option with the value being a path. If the path is a file, the options from the file will be parsed as if they were written where the <code>%include</code> option is. If the path is a folder, all files on that folder will be parsed following lexical order. Files starting with a dot are ignored. Files on subfolders are ignored. The <code>%include</code> option can be used recursively.</p>
<p>By default, an option on the command line overrides an option found in the configuration file, and an option in a configuration file overrides one in the defaults file.</p>
<p>This rule is simple for options that take a single value, but it can become complicated for options that are allowed to occur more than once: if you specify four SocksPorts in your configuration file, and one more SocksPort on the command line, the option on the command line will replace all of the SocksPorts in the configuration file. If this isn’t what you want, prefix the option name with a plus sign (<code>+</code>), and it will be appended to the previous set of options instead. For example, setting <code>SocksPort 9100</code> will use only port 9100, but setting <code>+SocksPort 9100</code> will use ports 9100 and 9050 (because this is the default).</p>
<p>Alternatively, you might want to remove every instance of an option in the configuration file, and not replace it at all: you might want to say on the command line that you want no SocksPorts at all. To do that, prefix the option name with a forward slash (<code>/</code>). You can use the plus sign (<code>+</code>) and the forward slash (<code>/</code>) in the configuration file and on the command line.</p>
<p><strong>GENERAL OPTIONS</strong></p>
<p><strong>BandwidthRate N bytes|KBytes|MBytes|GBytes|TBytes|KBits|MBits|GBits|TBits</strong></p>
<p>A token bucket limits the average incoming bandwidth usage on this node to the specified number of bytes per second, and the average outgoing bandwidth usage to that same value. If you want to run a relay in the public network, this needs to be at the very least 75 KBytes for a relay (that is, 600 kbits) or 50 KBytes for a bridge (400 kbits) — but of course, more is better; we recommend at least 250 KBytes (2 mbits) if possible. (Default: 1 GByte)</p>
<p>Note that this option, and other bandwidth-limiting options, apply to TCP data only: They do not count TCP headers or DNS traffic.</p>
<p>Tor uses powers of two, not powers of ten, so 1 GByte is 1024*1024*1024 bytes as opposed to 1 billion bytes.</p>
<p>With this option, and in other options that take arguments in bytes, KBytes, and so on, other formats are also supported. Notably, <code>KBytes</code> can also be written as <code>kilobytes</code> or <code>kb</code>; <code>MBytes</code> can be written as <code>megabytes</code> or <code>MB</code>; <code>kbits</code> can be written as <code>kilobits</code>; and so forth. Case doesn’t matter. Tor also accepts <code>byte</code> and <code>bit</code> in the singular. The prefixes <code>tera</code> and <code>T</code> are also recognized. If no units are given, we default to bytes. To avoid confusion, we recommend writing <code>bytes</code> or <code>bits</code> explicitly, since it’s easy to forget that <code>B</code> means bytes, not bits.</p>
<p><strong>BandwidthBurst N bytes|KBytes|MBytes|GBytes|TBytes|KBits|MBits|GBits|TBits</strong></p>
<p>Limit the maximum token bucket size (also known as the burst) to the given number of bytes in each direction. (Default: 1 GByte)</p>
<p><strong>MaxAdvertisedBandwidth N bytes|KBytes|MBytes|GBytes|TBytes|KBits|MBits|GBits|TBits</strong></p>
<p>If set, we will not advertise more than this amount of bandwidth for our BandwidthRate. Server operators who want to reduce the number of clients who ask to build circuits through them (since this is proportional to advertised bandwidth rate) can thus reduce the CPU demands on their server without impacting network performance.</p>
<p><strong>RelayBandwidthRate N bytes|KBytes|MBytes|GBytes|TBytes|KBits|MBits|GBits|TBits</strong></p>
<p>If not 0, a separate token bucket limits the average incoming bandwidth usage for relayed traffic on this node to the specified number of bytes per second, and the average outgoing bandwidth usage to that same value. Relayed traffic currently is calculated to include answers to directory requests, but that may change in future versions. They do not include directory fetches by the relay (from authority or other relays), because that is considered &ldquo;client&rdquo; activity. (Default: 0)</p>
<p><strong>RelayBandwidthBurst N bytes|KBytes|MBytes|GBytes|TBytes|KBits|MBits|GBits|TBits</strong></p>
<p>If not 0, limit the maximum token bucket size (also known as the burst) for relayed traffic to the given number of bytes in each direction. They do not include directory fetches by the relay (from authority or other relays), because that is considered &ldquo;client&rdquo; activity. (Default: 0)</p>
<p><strong>PerConnBWRate N bytes|KBytes|MBytes|GBytes|TBytes|KBits|MBits|GBits|TBits</strong></p>
<p>If this option is set manually, or via the <code>perconnbwrate</code> consensus field, Tor will use it for separate rate limiting for each connection from a non-relay. (Default: 0)</p>
<p><strong>PerConnBWBurst N bytes|KBytes|MBytes|GBytes|TBytes|KBits|MBits|GBits|TBits</strong></p>
<p>If this option is set manually, or via the <code>perconnbwburst</code> consensus field, Tor will use it for separate rate limiting for each connection from a non-relay. (Default: 0)</p>
<p><strong>ClientTransportPlugin transport socks4|socks5 IP:PORT, ClientTransportPlugin transport exec path-to-binary [options]</strong></p>
<p>In its first form, when set along with a corresponding Bridge line, the Tor client forwards its traffic to a SOCKS-speaking proxy on <code>IP:PORT</code>. (IPv4 addresses should written as-is; IPv6 addresses should be wrapped in square brackets.) It’s the duty of that proxy to properly forward the traffic to the bridge.</p>
<p>In its second form, when set along with a corresponding Bridge line, the Tor client launches the pluggable transport proxy executable in path-to-binary using options as its command-line options, and forwards its traffic to it. It’s the duty of that proxy to properly forward the traffic to the bridge.</p>
<p><strong>ServerTransportPlugin transport exec path-to-binary [options]</strong></p>
<p>The Tor relay launches the pluggable transport proxy in <code>path-to-binary</code> using options as its command-line options, and expects to receive proxied client traffic from it.</p>
<p><strong>ServerTransportListenAddr transport IP:PORT</strong></p>
<p>When this option is set, Tor will suggest <code>IP:PORT</code> as the listening address of any pluggable transport proxy that tries to launch transport. (IPv4 addresses should written as-is; IPv6 addresses should be wrapped in square brackets.)</p>
<p><strong>ServerTransportOptions transport k=v k=v &hellip;</strong></p>
<p>When this option is set, Tor will pass the <code>k=v</code> parameters to any pluggable transport proxy that tries to launch transport. (Example: <code>ServerTransportOptions obfs45 shared-secret=bridgepasswd cache=/var/lib/tor/cache</code>)</p>
<p><strong>ExtORPort [address:]port|auto</strong></p>
<p>Open this port to listen for Extended ORPort connections from your pluggable transports.</p>
<p><strong>ExtORPortCookieAuthFile Path</strong></p>
<p>If set, this option overrides the default location and file name for the Extended ORPort’s cookie file — the cookie file is needed for pluggable transports to communicate through the Extended ORPort.</p>
<p><strong>ExtORPortCookieAuthFileGroupReadable 0|1</strong></p>
<p>If this option is set to 0, don’t allow the filesystem group to read the Extended OR Port cookie file. If the option is set to 1, make the cookie file readable by the default GID. (Making the file readable by other groups is not yet implemented; let us know if you need this for some reason.) (Default: 0)</p>
<p><strong>ConnLimit NUM</strong></p>
<p>The minimum number of file descriptors that must be available to the Tor process before it will start. Tor will ask the OS for as many file descriptors as the OS will allow (you can find this by <code>ulimit -H -n</code>). If this number is less than <code>ConnLimit</code>, then Tor will refuse to start.</p>
<p>Tor relays need thousands of sockets, to connect to every other relay. If you are running a private bridge, you can reduce the number of sockets that Tor uses. For example, to limit Tor to 500 sockets, run <code>ulimit -n 500</code> in a shell. Then start tor in the same shell, with <code>ConnLimit 500</code>. You may also need to set <code>DisableOOSCheck 0</code>.</p>
<p>Unless you have severely limited sockets, you probably don’t need to adjust <code>ConnLimit</code> itself. It has no effect on Windows, since that platform lacks <code>getrlimit()</code>. (Default: 1000)</p>
<p><strong>DisableNetwork 0|1</strong></p>
<p>When this option is set, we don’t listen for or accept any connections other than controller connections, and we close (and don’t reattempt) any outbound connections. Controllers sometimes use this option to avoid using the network until Tor is fully configured. Tor will make still certain network-related calls (like DNS lookups) as a part of its configuration process, even if <code>DisableNetwork</code> is set. (Default: 0)</p>
<p><strong>ConstrainedSockets 0|1</strong></p>
<p>If set, Tor will tell the kernel to attempt to shrink the buffers for all sockets to the size specified in <code>ConstrainedSockSize</code>. This is useful for virtual servers and other environments where system level TCP buffers may be limited. If you’re on a virtual server, and you encounter the <code>Error creating network socket: No buffer space available</code> message, you are likely experiencing this problem.</p>
<p>The preferred solution is to have the admin increase the buffer pool for the host itself via <code>/proc/sys/net/ipv4/tcp_mem</code> or equivalent facility; this configuration option is a second-resort.</p>
<p>The <code>DirPort</code> option should also not be used if TCP buffers are scarce. The cached directory requests consume additional sockets which exacerbates the problem.</p>
<p>You should not enable this feature unless you encounter the <code>No buffer space available</code> issue. Reducing the TCP buffers affects window size for the TCP stream and will reduce throughput in proportion to round trip time on long paths. (Default: 0)</p>
<p><strong>ConstrainedSockSize N bytes|KBytes</strong></p>
<p>When <code>ConstrainedSockets</code> is enabled the receive and transmit buffers for all sockets will be set to this limit. Must be a value between 2048 and 262144, in 1024 byte increments. Default of 8192 is recommended.</p>
<p><strong>ControlPort [address:]port|unix:path|auto [flags]</strong></p>
<p>If set, Tor will accept connections on this port and allow those connections to control the Tor process using the Tor Control Protocol (described in <code>control-spec.txt</code> in torspec).</p>
<p>Note: Unless you also specify one or more of <code>HashedControlPassword</code> or <code>CookieAuthentication</code>, setting this option will cause Tor to allow any process on the local host to control it. (Setting both authentication methods means either method is sufficient to authenticate to Tor.) This option is required for many Tor controllers; most use the value of 9051. If a unix domain socket is used, you may quote the path using standard C escape sequences. You can specify this directive multiple times, to bind to multiple address/port pairs. Set it to <code>auto</code> to have Tor pick a port for you. (Default: 0)</p>
<p>Recognized flags are:</p>
<p><em>GroupWritable</em></p>
<p>Unix domain sockets only: makes the socket get created as group-writable.</p>
<p><em>WorldWritable</em></p>
<p>Unix domain sockets only: makes the socket get created as world-writable.</p>
<p><em>RelaxDirModeCheck</em></p>
<p>Unix domain sockets only: Do not insist that the directory that holds the socket be read-restricted.</p>
<p><strong>ControlSocket Path</strong></p>
<p>Like <code>ControlPort</code>, but listens on a Unix domain socket, rather than a TCP socket. 0 disables <code>ControlSocket</code>. (Unix and Unix-like systems only.) (Default: 0)</p>
<p><strong>ControlSocketsGroupWritable 0|1</strong></p>
<p>If this option is set to 0, don’t allow the filesystem group to read and write unix sockets (e.g. ControlSocket). If the option is set to 1, make the control socket readable and writable by the default GID. (Default: 0)</p>
<p><strong>HashedControlPassword hashed_password</strong></p>
<p>Allow connections on the control port if they present the password whose one-way hash is <code>hashed_password</code>. You can compute the hash of a password by running <code>tor --hash-password password</code>. You can provide several acceptable passwords by using more than one <code>HashedControlPassword</code> line.</p>
<p><strong>CookieAuthentication 0|1</strong></p>
<p>If this option is set to 1, allow connections on the control port when the connecting process knows the contents of a file named <code>control_auth_cookie</code>, which Tor will create in its data directory. This authentication method should only be used on systems with good filesystem security. (Default: 0)</p>
<p><strong>CookieAuthFile Path</strong></p>
<p>If set, this option overrides the default location and file name for Tor’s cookie file. (See <code>CookieAuthentication</code> above.)</p>
<p><strong>CookieAuthFileGroupReadable 0|1</strong></p>
<p>If this option is set to 0, don’t allow the filesystem group to read the cookie file. If the option is set to 1, make the cookie file readable by the default GID. (Making the file readable by other groups is not yet implemented; let us know if you need this for some reason.) (Default: 0)</p>
<p><strong>ControlPortWriteToFile Path</strong></p>
<p>If set, Tor writes the address and port of any control port it opens to this address. Usable by controllers to learn the actual control port when <code>ControlPort</code> is set to <code>auto</code>.</p>
<p><strong>ControlPortFileGroupReadable 0|1</strong></p>
<p>If this option is set to 0, don’t allow the filesystem group to read the control port file. If the option is set to 1, make the control port file readable by the default GID. (Default: 0)</p>
<p><strong>DataDirectory DIR</strong></p>
<p>Store working data in DIR. Cannot be changed while Tor is running. (Default: <code>~/.tor</code> if your home directory is not <code>/</code>; otherwise, <code>/var/lib/tor</code>. On Windows, the default is your ApplicationData folder.)</p>
<p><strong>DataDirectoryGroupReadable 0|1</strong></p>
<p>If this option is set to 0, don’t allow the filesystem group to read the <code>DataDirectory</code>. If the option is set to 1, make the <code>DataDirectory</code> readable by the default GID. (Default: 0)</p>
<p><strong>CacheDirectory DIR</strong></p>
<p>Store cached directory data in DIR. Can not be changed while Tor is running. (Default: uses the value of DataDirectory.)</p>
<p><strong>CacheDirectoryGroupReadable 0|1|auto</strong></p>
<p>If this option is set to 0, don’t allow the filesystem group to read the <code>CacheDirectory</code>. If the option is set to 1, make the <code>CacheDirectory</code> readable by the default GID. If the option is <code>auto</code>, then we use the setting for <code>DataDirectoryGroupReadable</code> when the <code>CacheDirectory</code> is the same as the <code>DataDirectory</code>, and 0 otherwise. (Default: auto)</p>
<p><strong>FallbackDir ipv4address:dirport orport=orport id=fingerprint [weight=num] [ipv6=[ipv6address]:orport]</strong></p>
<p>When Tor is unable to connect to any directory cache for directory info (usually because it doesn’t know about any yet) it tries a hard-coded directory. Relays try one directory authority at a time. Clients try multiple directory authorities and <code>FallbackDir</code>s, to avoid hangs on startup if a hard-coded directory is down. Clients wait for a few seconds between each attempt, and retry <code>FallbackDir</code>s more often than directory authorities, to reduce the load on the directory authorities. <code>FallbackDir</code>s should be stable relays with stable IP addresses, ports, and identity keys. They must have a <code>DirPort</code>.</p>
<p>By default, the directory authorities are also <code>FallbackDir</code>s. Specifying a <code>FallbackDir</code> replaces Tor’s default hard-coded <code>FallbackDir</code>s (if any). (See the <code>DirAuthority</code> entry for an explanation of each flag.)</p>
<p><strong>UseDefaultFallbackDirs 0|1</strong></p>
<p>Use Tor’s default hard-coded <code>FallbackDir</code>s (if any). (When a <code>FallbackDir</code> line is present, it replaces the hard-coded <code>FallbackDir</code>s, regardless of the value of <code>UseDefaultFallbackDirs</code>.) (Default: 1)</p>
<p><strong>DirAuthority [nickname] [flags] ipv4address:dirport fingerprint</strong></p>
<p>Use a nonstandard authoritative directory server at the provided address and port, with the specified key fingerprint. This option can be repeated many times, for multiple authoritative directory servers. Flags are separated by spaces, and determine what kind of an authority this directory is. By default, an authority is not authoritative for any directory style or version unless an appropriate flag is given.</p>
<p>Tor will use this authority as a bridge authoritative directory if the <code>bridge</code> flag is set. If a flag <code>orport=orport</code> is given, Tor will use the given port when opening encrypted tunnels to the dirserver. If a flag <code>weight=num</code> is given, then the directory server is chosen randomly with probability proportional to that weight (default 1.0). If a flag <code>v3ident=fp</code> is given, the dirserver is a v3 directory authority whose v3 long-term signing key has the fingerprint <code>fp</code>. Lastly, if an <code>ipv6=[ipv6address]:orport</code> flag is present, then the directory authority is listening for IPv6 connections on the indicated IPv6 address and OR Port.</p>
<p>Tor will contact the authority at <code>ipv4address</code> to download directory documents. Clients always use the <code>ORPort</code>. Relays usually use the <code>DirPort</code>, but will use the <code>ORPort</code> in some circumstances. If an IPv6 <code>ORPort</code> is supplied, clients will also download directory documents at the IPv6 <code>ORPort</code>, if they are configured to use IPv6.</p>
<p>If no <code>DirAuthority</code> line is given, Tor will use the default directory authorities. NOTE: this option is intended for setting up a private Tor network with its own directory authorities. If you use it, you will be distinguishable from other users, because you won’t believe the same authorities they do.</p>
<p><strong>DirAuthorityFallbackRate NUM</strong></p>
<p>When configured to use both directory authorities and fallback directories, the directory authorities also work as fallbacks. They are chosen with their regular weights, multiplied by this number, which should be 1.0 or less. The default is less than 1, to reduce load on authorities. (Default: 0.1)</p>
<p><strong>AlternateDirAuthority [nickname] [flags] ipv4address:port fingerprint</strong></p>
<p><strong>AlternateBridgeAuthority [nickname] [flags] ipv4address:port fingerprint</strong></p>
<p>These options behave as <code>DirAuthority</code>, but they replace fewer of the default directory authorities. Using <code>A</code>lternateDirAuthority<code>replaces the default Tor directory authorities, but leaves the default bridge authorities in place. Similarly,</code>AlternateBridgeAuthority` replaces the default bridge authority, but leaves the directory authorities alone.</p>
<p><strong>DisableAllSwap 0|1</strong></p>
<p>If set to 1, Tor will attempt to lock all current and future memory pages, so that memory cannot be paged out. Windows, OS X, and Solaris are currently not supported. We believe that this feature works on modern Gnu/Linux distributions, and that it should work on *BSD systems (untested). This option requires that you start your Tor as root, and you should use the User option to properly reduce Tor’s privileges. Can not be changed while Tor is running. (Default: 0)</p>
<p><strong>DisableDebuggerAttachment 0|1</strong></p>
<p>If set to 1, Tor will attempt to prevent basic debugging attachment attempts by other processes. This may also keep Tor from generating core files if it crashes. It has no impact for users who wish to attach if they have <code>CAP_SYS_PTRACE</code> or if they are <code>root</code>. We believe that this feature works on modern Gnu/Linux distributions, and that it may also work on *BSD systems (untested). Some modern Gnu/Linux systems such as Ubuntu have the <code>kernel.yama.ptrace_scope</code> <code>sysctl</code> and by default enable it as an attempt to limit the <code>PTRACE</code> scope for all user processes by default. This feature will attempt to limit the <code>PTRACE</code> scope for Tor specifically - it will not attempt to alter the system wide <code>ptrace</code> scope as it may not even exist. If you wish to attach to Tor with a debugger such as <code>gdb</code> or <code>strace</code> you will want to set this to 0 for the duration of your debugging. Normal users should leave it on. Disabling this option while Tor is running is prohibited. (Default: 1)</p>
<p><strong>FetchDirInfoEarly 0|1</strong></p>
<p>If set to 1, Tor will always fetch directory information like other directory caches, even if you don’t meet the normal criteria for fetching early. Normal users should leave it off. (Default: 0)</p>
<p><strong>FetchDirInfoExtraEarly 0|1</strong></p>
<p>If set to 1, Tor will fetch directory information before other directory caches. It will attempt to download directory information closer to the start of the consensus period. Normal users should leave it off. (Default: 0)</p>
<p><strong>FetchHidServDescriptors 0|1</strong></p>
<p>If set to 0, Tor will never fetch any hidden service descriptors from the rendezvous directories. This option is only useful if you’re using a Tor controller that handles hidden service fetches for you. (Default: 1)</p>
<p><strong>FetchServerDescriptors 0|1</strong></p>
<p>If set to 0, Tor will never fetch any network status summaries or server descriptors from the directory servers. This option is only useful if you’re using a Tor controller that handles directory fetches for you. (Default: 1)</p>
<p><strong>FetchUselessDescriptors 0|1</strong></p>
<p>If set to 1, Tor will fetch every consensus flavor, and all server descriptors and authority certificates referenced by those consensuses, except for extra info descriptors. When this option is 1, Tor will also keep fetching descriptors, even when idle. If set to 0, Tor will avoid fetching useless descriptors: flavors that it is not using to build circuits, and authority certificates it does not trust. When Tor hasn’t built any application circuits, it will go idle, and stop fetching descriptors. This option is useful if you’re using a tor client with an external parser that uses a full consensus. This option fetches all documents except <code>extrainfo</code> descriptors, <code>DirCache</code> fetches and serves all documents except <code>extrainfo</code> descriptors, <code>DownloadExtraInfo</code> fetches <code>extrainfo</code> documents, and serves them if <code>DirCache</code> is on, and <code>UseMicrodescriptors</code> changes the flavor of consensus and descriptors that is fetched and used for building circuits. (Default: 0)</p>
<p><strong>HTTPProxy host[:port]</strong></p>
<p>Tor will make all its directory requests through this <code>host:port</code> (or <code>host:80</code> if port is not specified), rather than connecting directly to any directory servers. (DEPRECATED: As of 0.3.1.0-alpha you should use <code>HTTPSProxy</code>.)</p>
<p><strong>HTTPProxyAuthenticator username:password</strong></p>
<p>If defined, Tor will use this username:password for Basic HTTP proxy authentication, as in RFC 2617. This is currently the only form of HTTP proxy authentication that Tor supports; feel free to submit a patch if you want it to support others. (DEPRECATED: As of 0.3.1.0-alpha you should use <code>HTTPSProxyAuthenticator</code>.)</p>
<p><strong>HTTPSProxy host[:port]</strong></p>
<p>Tor will make all its OR (SSL) connections through this <code>host:port</code> (or <code>host:443</code> if port is not specified), via <code>HTTP CONNECT</code> rather than connecting directly to servers. You may want to set <code>FascistFirewall</code> to restrict the set of ports you might try to connect to, if your HTTPS proxy only allows connecting to certain ports.</p>
<p><strong>HTTPSProxyAuthenticator username:password</strong></p>
<p>If defined, Tor will use this <code>username:password</code> for Basic HTTPS proxy authentication, as in RFC 2617. This is currently the only form of HTTPS proxy authentication that Tor supports; feel free to submit a patch if you want it to support others.</p>
<p><strong>Sandbox 0|1</strong></p>
<p>If set to 1, Tor will run securely through the use of a syscall sandbox. Otherwise the sandbox will be disabled. The option is currently an experimental feature. It only works on Linux-based operating systems, and only when Tor has been built with the libseccomp library. This option can not be changed while Tor is running.</p>
<p>When the <code>Sandbox</code> is 1, the following options can not be changed when tor is running: <code>Address</code>, <code>ConnLimit</code>, <code>CookieAuthFile</code>, <code>DirPortFrontPage</code>, <code>ExtORPortCookieAuthFile</code>, <code>Logs</code>, <code>ServerDNSResolvConfFile</code>, <code>ClientOnionAuthDir</code> (and any files in it won’t reload on HUP signal).</p>
<p>Launching new Onion Services through the control port is not supported with current syscall sandboxing implementation. Tor must remain in client or server mode (some changes to <code>ClientOnly</code> and <code>ORPort</code> are not allowed). Currently, if <code>Sandbox</code> is 1, <code>ControlPort</code> command <code>GETINFO address</code> will not work. (Default: 0)</p>
<p><strong>Socks4Proxy host[:port]</strong></p>
<p>Tor will make all OR connections through the SOCKS 4 proxy at <code>host:port</code> (or <code>host:1080</code> if port is not specified).</p>
<p><strong>Socks5Proxy host[:port]</strong></p>
<p>Tor will make all OR connections through the SOCKS 5 proxy at <code>host:port</code> (or <code>host:1080</code> if port is not specified).</p>
<p><strong>Socks5ProxyUsername username</strong></p>
<p><strong>Socks5ProxyPassword password</strong></p>
<p>If defined, authenticate to the SOCKS 5 server using username and password in accordance to RFC 1929. Both username and password must be between 1 and 255 characters.</p>
<p><strong>UnixSocksGroupWritable 0|1</strong></p>
<p>If this option is set to 0, don’t allow the filesystem group to read and write unix sockets (e.g. <code>SocksPort unix:</code>). If the option is set to 1, make the Unix socket readable and writable by the default GID. (Default: 0)</p>
<p><strong>KeepalivePeriod NUM</strong></p>
<p>To keep firewalls from expiring connections, send a padding keepalive cell every <code>NUM</code> seconds on open connections that are in use. (Default: 5 minutes)</p>
<p><strong>Log minSeverity[-maxSeverity] stderr|stdout|syslog</strong></p>
<p>Send all messages between <code>minSeverity</code> and <code>maxSeverity</code> to the standard output stream, the standard error stream, or to the system log. (The <code>syslog</code> value is only supported on Unix.) Recognized severity levels are <code>debug</code>, <code>info</code>, <code>notice</code>, <code>warn</code>, and <code>err</code>. We advise using <code>notice</code> in most cases, since anything more verbose may provide sensitive information to an attacker who obtains the logs. If only one severity level is given, all messages of that level or higher will be sent to the listed destination.</p>
<p>Some low-level logs may be sent from signal handlers, so their destination logs must be signal-safe. These low-level logs include backtraces, logging function errors, and errors in code called by logging functions. Signal-safe logs are always sent to <code>stderr</code> or <code>stdout</code>. They are also sent to a limited number of log files that are configured to log messages at error severity from the bug or general domains. They are never sent as syslogs, android logs, control port log events, or to any API-based log destinations.</p>
<p><strong>Log minSeverity[-maxSeverity] file FILENAME</strong></p>
<p>As above, but send log messages to the listed filename. The <code>Log</code> option may appear more than once in a configuration file. Messages are sent to all the logs that match their severity level.</p>
<p><strong>Log [domain,&hellip;]minSeverity[-maxSeverity] &hellip; file FILENAME</strong></p>
<p><strong>Log [domain,&hellip;]minSeverity[-maxSeverity] &hellip; stderr|stdout|syslog</strong></p>
<p>As above, but select messages by range of log severity and by a set of &ldquo;logging domains&rdquo;. Each logging domain corresponds to an area of functionality inside Tor. You can specify any number of severity ranges for a single log statement, each of them prefixed by a comma-separated list of logging domains. You can prefix a domain with <code>~</code> to indicate negation, and use <code>*</code> to indicate &ldquo;all domains&rdquo;. If you specify a severity range without a list of domains, it matches all domains.</p>
<p>This is an advanced feature which is most useful for debugging one or two of Tor’s subsystems at a time.</p>
<p>The currently recognized domains are: <code>general</code>, <code>crypto</code>, <code>net</code>, <code>config</code>, <code>fs</code>, <code>protocol</code>, <code>mm</code>, <code>http</code>, <code>app</code>, <code>control</code>, <code>circ</code>, <code>rend</code>, <code>bug</code>, <code>dir</code>, <code>dirserv</code>, <code>or</code>, <code>edge</code>, <code>acct</code>, <code>hist</code>, <code>handshake</code>, <code>heartbeat</code>, <code>channel</code>, <code>sched</code>, <code>guard</code>, <code>consdiff</code>, <code>dos</code>, <code>process</code>, <code>pt</code>, <code>btrack</code>, and <code>mesg</code>. Domain names are case-insensitive.</p>
<p>For example, <code>Log [handshake]debug [~net,~mm]info notice stdout</code> sends to <code>stdout</code>: all handshake messages of any severity, all info-and-higher messages from domains other than networking and memory management, and all messages of severity <code>notice</code> or higher.</p>
<p><strong>LogMessageDomains 0|1</strong></p>
<p>If 1, Tor includes message domains with each log message. Every log message currently has at least one domain; most currently have exactly one. This doesn’t affect controller log messages. (Default: 0)</p>
<p><strong>MaxUnparseableDescSizeToLog N bytes|KBytes|MBytes|GBytes|TBytes</strong></p>
<p>Unparseable descriptors (e.g. for votes, consensuses, routers) are logged in separate files by hash, up to the specified size in total. Note that only files logged during the lifetime of this Tor process count toward the total; this is intended to be used to debug problems without opening live servers to resource exhaustion attacks. (Default: 10 MB)</p>
<p><strong>OutboundBindAddress IP</strong></p>
<p>Make all outbound connections originate from the IP address specified. This is only useful when you have multiple network interfaces, and you want all of Tor’s outgoing connections to use a single one. This option may be used twice, once with an IPv4 address and once with an IPv6 address. IPv6 addresses should be wrapped in square brackets. This setting will be ignored for connections to the loopback addresses (<code>127.0.0.0/8</code> and <code>::1</code>), and is not used for DNS requests as well.</p>
<p><strong>OutboundBindAddressOR IP</strong></p>
<p>Make all outbound non-exit (relay and other) connections originate from the IP address specified. This option overrides <code>OutboundBindAddress</code> for the same IP version. This option may be used twice, once with an IPv4 address and once with an IPv6 address. IPv6 addresses should be wrapped in square brackets. This setting will be ignored for connections to the loopback addresses (<code>127.0.0.0/8</code> and <code>::1</code>).</p>
<p><strong>OutboundBindAddressExit IP</strong></p>
<p>Make all outbound exit connections originate from the IP address specified. This option overrides OutboundBindAddress for the same IP version. This option may be used twice, once with an IPv4 address and once with an IPv6 address. IPv6 addresses should be wrapped in square brackets. This setting will be ignored for connections to the loopback addresses (<code>127.0.0.0/8</code> and <code>::1</code>).</p>
<p><strong>PidFile FILE</strong></p>
<p>On startup, write our PID to <code>FILE</code>. On clean shutdown, remove <code>FILE</code>. Can not be changed while Tor is running.</p>
<p><strong>ProtocolWarnings 0|1</strong></p>
<p>If 1, Tor will log with severity <code>warn</code> various cases of other parties not following the Tor specification. Otherwise, they are logged with severity <code>info</code>. (Default: 0)</p>
<p><strong>RunAsDaemon 0|1</strong></p>
<p>If 1, Tor forks and daemonizes to the background. This option has no effect on Windows; instead you should use the <code>--service</code> command-line option. Cannot be changed while Tor is running. (Default: 0)</p>
<p><strong>LogTimeGranularity NUM</strong></p>
<p>Set the resolution of timestamps in Tor’s logs to <code>NUM</code> milliseconds. <code>NUM</code> must be positive and either a divisor or a multiple of 1 second. Note that this option only controls the granularity written by Tor to a file or console log. Tor does not (for example) &ldquo;batch up&rdquo; log messages to affect times logged by a controller, times attached to <code>syslog</code> messages, or the <code>mtime</code> fields on log files. (Default: 1 second)</p>
<p><strong>TruncateLogFile 0|1</strong></p>
<p>If 1, Tor will overwrite logs at startup and in response to a <code>HUP</code> signal, instead of appending to them. (Default: 0)</p>
<p><strong>SyslogIdentityTag tag</strong></p>
<p>When logging to syslog, adds a tag to the <code>syslog</code> identity such that log entries are marked with <code>Tor-tag</code>. Cannot be changed while Tor is running. (Default: none)</p>
<p><strong>AndroidIdentityTag tag</strong></p>
<p>When logging to Android’s logging subsystem, adds a tag to the log identity such that log entries are marked with <code>Tor-tag</code>. Cannot be changed while Tor is running. (Default: none)</p>
<p><strong>SafeLogging 0|1|relay</strong></p>
<p>Tor can scrub potentially sensitive strings from log messages (e.g. addresses) by replacing them with the string <code>[scrubbed]</code>. This way logs can still be useful, but they don’t leave behind personally identifying information about what sites a user might have visited.</p>
<p>If this option is set to 0, Tor will not perform any scrubbing; if it is set to 1, all potentially sensitive strings are replaced. If it is set to <code>relay</code>, all log messages generated when acting as a relay are sanitized, but all messages generated when acting as a client are not. Note: Tor may not heed this option when logging at log levels below ``notice`. (Default: 1)</p>
<p><strong>User Username</strong></p>
<p>On startup, setuid to this user and setgid to their primary group. Cannot be changed while Tor is running.</p>
<p><strong>KeepBindCapabilities 0|1|auto</strong></p>
<p>On Linux, when we are started as <code>root</code> and we switch our identity using the <code>User</code> option, the <code>KeepBindCapabilities</code> option tells us whether to try to retain our ability to bind to low ports. If this value is 1, we try to keep the capability; if it is 0 we do not; and if it is auto, we keep the capability only if we are configured to listen on a low port. Cannot be changed while Tor is running. (Default: auto.)</p>
<p><strong>HardwareAccel 0|1</strong></p>
<p>If non-zero, try to use built-in (static) crypto hardware acceleration when available. Cannot be changed while Tor is running. (Default: 0)</p>
<p><strong>AccelName NAME</strong></p>
<p>When using OpenSSL hardware crypto acceleration attempt to load the dynamic engine of this name. This must be used for any dynamic hardware engine. Names can be verified with the <code>openssl engine</code> command. Cannot be changed while Tor is running.</p>
<p><strong>AccelDir DIR</strong></p>
<p>Specify this option if using dynamic hardware acceleration and the engine implementation library resides somewhere other than the OpenSSL default. Cannot be changed while Tor is running.</p>
<p><strong>AvoidDiskWrites 0|1</strong></p>
<p>If non-zero, try to write to disk less frequently than we would otherwise. This is useful when running on flash memory or other media that support only a limited number of writes. (Default: 0)</p>
<p><strong>CircuitPriorityHalflife NUM</strong></p>
<p>If this value is set, we override the default algorithm for choosing which circuit’s cell to deliver or relay next. It is delivered first to the circuit that has the lowest weighted cell count, where cells are weighted exponentially according to this value (in seconds). If the value is -1, it is taken from the consensus if possible else it will fallback to the default value of 30. Minimum: 1, Maximum: 2147483647. This can be defined as a float value. This is an advanced option; you generally shouldn’t have to mess with it. (Default: -1)</p>
<p><strong>CountPrivateBandwidth 0|1</strong></p>
<p>If this option is set, then Tor’s rate-limiting applies not only to remote connections, but also to connections to private addresses like <code>127.0.0.1</code> or <code>10.0.0.1</code>. This is mostly useful for debugging rate-limiting. (Default: 0)</p>
<p><strong>ExtendByEd25519ID 0|1|auto</strong></p>
<p>If this option is set to 1, we always try to include a relay’s Ed25519 ID when telling the proceeding relay in a circuit to extend to it. If this option is set to 0, we never include Ed25519 IDs when extending circuits. If the option is set to default, we obey a parameter in the consensus document. (Default: auto)</p>
<p><strong>NoExec 0|1</strong></p>
<p>If this option is set to 1, then Tor will never launch another executable, regardless of the settings of <code>ClientTransportPlugin</code> or <code>ServerTransportPlugin</code>. Once this option has been set to 1, it cannot be set back to 0 without restarting Tor. (Default: 0)</p>
<p><strong>Schedulers KIST|KISTLite|Vanilla</strong></p>
<p>Specify the scheduler type that tor should use. The scheduler is responsible for moving data around within a Tor process. This is an ordered list by priority which means that the first value will be tried first and if unavailable, the second one is tried and so on. It is possible to change these values at runtime.</p>
<p>This option mostly effects relays, and most operators should leave it set to its default value. (Default: <code>KIST,KISTLite,Vanilla</code>)</p>
<p>The possible scheduler types are:</p>
<p><code>KIST</code>: Kernel-Informed Socket Transport. Tor will use TCP information from the kernel to make informed decisions regarding how much data to send and when to send it. <code>KIST</code> also handles traffic in batches (see <code>KISTSchedRunInterval</code>) in order to improve traffic prioritization decisions. As implemented, KIST will only work on Linux kernel version 2.6.39 or higher.</p>
<p><code>KISTLite</code>: Same as <code>KIST</code> but without kernel support. Tor will use all the same mechanics as with <code>KIST</code>, including the batching, but its decisions regarding how much data to send will not be as good. <code>KISTLite</code> will work on all kernels and operating systems, and the majority of the benefits of <code>KIST</code> are still realized with KISTLite.</p>
<p><code>Vanilla</code>: The scheduler that Tor used before <code>KIST</code> was implemented. It sends as much data as possible, as soon as possible. <code>Vanilla</code> will work on all kernels and operating systems.</p>
<p><strong>KISTSchedRunInterval NUM msec</strong></p>
<p>If <code>KIST</code> or <code>KISTLite</code> is used in the <code>Schedulers</code> option, this controls at which interval the scheduler tick is. If the value is 0 msec, the value is taken from the consensus if possible else it will fallback to the default 10 msec. Maximum possible value is 100 msec. (Default: 0 msec)</p>
<p><strong>KISTSockBufSizeFactor NUM</strong></p>
<p>If <code>KIST</code> is used in <code>Schedulers</code>, this is a multiplier of the per-socket limit calculation of the <code>KIST</code> algorithm. (Default: 1.0)</p>
<h2 id="client-options">CLIENT OPTIONS</h2>
<p>The following options are useful only for clients (that is, if <code>SocksPort</code>, <code>HTTPTunnelPort</code>, <code>TransPort</code>, <code>DNSPort</code>, or <code>NATDPort</code> is non-zero):</p>
<p><strong>Bridge [transport] IP:ORPort [fingerprint]</strong></p>
<p>When set along with <code>UseBridges</code>, instructs Tor to use the relay at <code>IP:ORPort</code> as a bridge relaying into the Tor network. If <code>fingerprint</code> is provided (using the same format as for <code>DirAuthority</code>), we will verify that the relay running at that location has the right fingerprint. We also use fingerprint to look up the bridge descriptor at the bridge authority, if it’s provided and if <code>UpdateBridgesFromAuthority</code> is set too.</p>
<p>If <code>transport</code> is provided, it must match a <code>ClientTransportPlugin</code> line. We then use that pluggable transport’s proxy to transfer data to the bridge, rather than connecting to the bridge directly. Some transports use a transport-specific method to work out the remote address to connect to. These transports typically ignore the <code>IP:ORPort</code> specified in the bridge line.</p>
<p>Tor passes any <code>key=val</code> settings to the pluggable transport proxy as per-connection arguments when connecting to the bridge. Consult the documentation of the pluggable transport for details of what arguments it supports.</p>
<p><strong>LearnCircuitBuildTimeout 0|1</strong></p>
<p>If 0, <code>CircuitBuildTimeout</code> adaptive learning is disabled. (Default: 1)</p>
<p><strong>CircuitBuildTimeout NUM</strong></p>
<p>Try for at most <code>NUM</code> seconds when building circuits. If the circuit isn’t open in that time, give up on it. If <code>LearnCircuitBuildTimeout</code> is 1, this value serves as the initial value to use before a timeout is learned. If <code>LearnCircuitBuildTimeout</code> is 0, this value is the only value used. (Default: 60 seconds)</p>
<p><strong>CircuitsAvailableTimeout NUM</strong></p>
<p>Tor will attempt to keep at least one open, unused circuit available for this amount of time. This option governs how long idle circuits are kept open, as well as the amount of time Tor will keep a circuit open to each of the recently used ports. This way when the Tor client is entirely idle, it can expire all of its circuits, and then expire its TLS connections. Note that the actual timeout value is uniformly randomized from the specified value to twice that amount. (Default: 30 minutes; Max: 24 hours)</p>
<p><strong>CircuitStreamTimeout NUM</strong></p>
<p>If non-zero, this option overrides our internal timeout schedule for how many seconds until we detach a stream from a circuit and try a new circuit. If your network is particularly slow, you might want to set this to a number like 60. (Default: 0)</p>
<p><strong>ClientOnly 0|1</strong></p>
<p>If set to 1, Tor will not run as a relay or serve directory requests, even if the <code>ORPort</code>, <code>ExtORPort</code>, or <code>DirPort</code> options are set. (This config option is mostly unnecessary: we added it back when we were considering having Tor clients auto-promote themselves to being relays if they were stable and fast enough. The current behavior is simply that Tor is a client unless <code>ORPort</code>, <code>ExtORPort</code>, or <code>DirPort</code> are configured.) (Default: 0)</p>
<p><strong>ConnectionPadding 0|1|auto</strong></p>
<p>This option governs Tor’s use of padding to defend against some forms of traffic analysis. If it is set to auto, Tor will send padding only if both the client and the relay support it. If it is set to 0, Tor will not send any padding cells. If it is set to 1, Tor will still send padding for client connections regardless of relay support. Only clients may set this option. This option should be offered via the UI to mobile users for use where bandwidth may be expensive. (Default: auto)</p>
<p><strong>ReducedConnectionPadding 0|1</strong></p>
<p>If set to 1, Tor will not not hold OR connections open for very long, and will send less padding on these connections. Only clients may set this option. This option should be offered via the UI to mobile users for use where bandwidth may be expensive. (Default: 0)</p>
<p><strong>CircuitPadding 0|1</strong></p>
<p>If set to 0, Tor will not pad client circuits with additional cover traffic. Only clients may set this option. This option should be offered via the UI to mobile users for use where bandwidth may be expensive. If set to 1, padding will be negotiated as per the consensus and relay support (unlike <code>ConnectionPadding</code>, <code>CircuitPadding</code> cannot be force-enabled). (Default: 1)</p>
<p><strong>ReducedCircuitPadding 0|1</strong></p>
<p>If set to 1, Tor will only use circuit padding algorithms that have low overhead. Only clients may set this option. This option should be offered via the UI to mobile users for use where bandwidth may be expensive. (Default: 0)</p>
<p><strong>ExcludeNodes node,node,&hellip;</strong></p>
<p>A list of identity fingerprints, country codes, and address patterns of nodes to avoid when building a circuit. Country codes are 2-letter ISO3166 codes, and must be wrapped in braces; fingerprints may be preceded by a dollar sign. (Example: <code>ExcludeNodes ABCD1234CDEF5678ABCD1234CDEF5678ABCD1234, {cc}, 255.254.0.0/8</code>)</p>
<p>By default, this option is treated as a preference that Tor is allowed to override in order to keep working. For example, if you try to connect to a hidden service, but you have excluded all of the hidden service’s introduction points, Tor will connect to one of them anyway. If you do not want this behavior, set the <code>StrictNodes</code> option (documented below).</p>
<p>Note also that if you are a relay, this (and the other node selection options below) only affects your own circuits that Tor builds for you. Clients can still build circuits through you to any node. Controllers can tell Tor to build circuits through any node.</p>
<p>Country codes are case-insensitive. The code <code>{??}</code> refers to nodes whose country can’t be identified. No country code, including <code>{??}</code>, works if no GeoIPFile can be loaded. See also the <code>GeoIPExcludeUnknown</code> option below.</p>
<p><strong>ExcludeExitNodes node,node,&hellip;</strong></p>
<p>A list of identity fingerprints, country codes, and address patterns of nodes to never use when picking an exit node &ndash; that is, a node that delivers traffic for you outside the Tor network. Note that any node listed in <code>ExcludeNodes</code> is automatically considered to be part of this list too. See the <code>ExcludeNodes</code> option for more information on how to specify nodes. See also the caveats on the <code>ExitNodes</code> option below.</p>
<p><strong>GeoIPExcludeUnknown 0|1|auto</strong> If this option is set to auto, then whenever any country code is set in ExcludeNodes or ExcludeExitNodes, all nodes with unknown country (<code>{??}</code> and possibly <code>{A1}</code>) are treated as excluded as well. If this option is set to 1, then all unknown countries are treated as excluded in <code>ExcludeNodes</code> and <code>ExcludeExitNodes</code>. This option has no effect when a GeoIP file isn’t configured or can’t be found. (Default: auto)</p>
<p><strong>ExitNodes node,node,&hellip;</strong></p>
<p>A list of identity fingerprints, country codes, and address patterns of nodes to use as exit node &ndash; that is, a node that delivers traffic for you outside the Tor network. See the <code>ExcludeNodes</code> option for more information on how to specify nodes. Note that if you list too few nodes here, or if you exclude too many exit nodes with <code>ExcludeExitNodes</code>, you can degrade functionality. For example, if none of the exits you list allows traffic on port 80 or 443, you won’t be able to browse the web. Note also that not every circuit is used to deliver traffic outside of the Tor network. It is normal to see non-exit circuits (such as those used to connect to hidden services, those that do directory fetches, those used for relay reachability self-tests, and so on) that end at a non-exit node. To keep a node from being used entirely, see <code>ExcludeNodes</code> and <code>StrictNodes</code>. The <code>ExcludeNodes</code> option overrides this option: any node listed in both <code>ExitNodes</code> and <code>ExcludeNodes</code> is treated as excluded. The <code>.exit</code> address notation, if enabled via <code>MapAddress</code>, overrides this option.</p>
<p><strong>MiddleNodes node,node,&hellip;</strong></p>
<p>A list of identity fingerprints and country codes of nodes to use for &ldquo;middle&rdquo; hops in your normal circuits. Normal circuits include all circuits except for direct connections to directory servers. Middle hops are all hops other than exit and entry. This is an experimental feature that is meant to be used by researchers and developers to test new features in the Tor network safely. Using it without care will strongly influence your anonymity. This feature might get removed in the future.</p>
<p>The <code>HSLayer2Node</code> and <code>HSLayer3Node</code> options override this option for onion service circuits, if they are set. The vanguards addon will read this option, and if set, it will set <code>HSLayer2Nodes</code> and <code>HSLayer3Nodes</code> to nodes from this set.</p>
<p>The <code>ExcludeNodes</code> option overrides this option: any node listed in both <code>MiddleNodes</code> and <code>ExcludeNodes</code> is treated as excluded. See the <code>ExcludeNodes</code> option for more information on how to specify nodes.</p>
<p><strong>EntryNodes node,node,&hellip;</strong></p>
<p>A list of identity fingerprints and country codes of nodes to use for the first hop in your normal circuits. Normal circuits include all circuits except for direct connections to directory servers. The <code>Bridge</code> option overrides this option; if you have configured bridges and <code>UseBridges</code> is 1, the <code>Bridges</code> are used as your entry nodes.</p>
<p>The <code>ExcludeNodes</code> option overrides this option: any node listed in both <code>EntryNodes</code> and <code>ExcludeNodes</code> is treated as excluded. See the <code>ExcludeNodes</code> option for more information on how to specify nodes.</p>
<p><strong>StrictNodes 0|1</strong></p>
<p>If <code>StrictNodes</code> is set to 1, Tor will treat solely the <code>ExcludeNodes</code> option as a requirement to follow for all the circuits you generate, even if doing so will break functionality for you (<code>StrictNodes</code> does not apply to <code>ExcludeExitNodes</code>, <code>ExitNodes</code>, <code>MiddleNodes</code>, or <code>MapAddress</code>).</p>
<p>If <code>StrictNodes</code> is set to 0, Tor will still try to avoid nodes in the <code>ExcludeNodes</code> list, but it will err on the side of avoiding unexpected errors. Specifically, <code>StrictNodes 0</code> tells Tor that it is okay to use an excluded node when it is necessary to perform relay reachability self-tests, connect to a hidden service, provide a hidden service to a client, fulfill a .exit request, upload directory information, or download directory information. (Default: 0)</p>
<p><strong>FascistFirewall 0|1</strong></p>
<p>If 1, Tor will only create outgoing connections to ORs running on ports that your firewall allows (defaults to 80 and 443; see <code>FirewallPorts</code>). This will allow you to run Tor as a client behind a firewall with restrictive policies, but will not allow you to run as a server behind such a firewall. If you prefer more fine-grained control, use <code>ReachableAddresses</code> instead.</p>
<p><strong>FirewallPorts PORTS</strong></p>
<p>A list of ports that your firewall allows you to connect to. Only used when <code>FascistFirewall</code> is set. This option is deprecated; use <code>ReachableAddresses</code> instead. (Default: 80, 443)</p>
<p><strong>ReachableAddresses IP[/MASK][:PORT]&hellip;</strong></p>
<p>A comma-separated list of IP addresses and ports that your firewall allows you to connect to. The format is as for the addresses in <code>ExitPolicy</code>, except that &ldquo;accept&rdquo; is understood unless &ldquo;reject&rdquo; is explicitly provided. For example, <code>ReachableAddresses 99.0.0.0/8, reject 18.0.0.0/8:80, accept *:80</code> means that your firewall allows connections to everything inside net 99, rejects port 80 connections to net 18, and accepts connections to port 80 otherwise. (Default: &lsquo;accept <em>:</em>&rsquo;.)</p>
<p><strong>ReachableDirAddresses IP[/MASK][:PORT]&hellip;</strong></p>
<p>Like <code>ReachableAddresses</code>, a list of addresses and ports. Tor will obey these restrictions when fetching directory information, using standard HTTP GET requests. If not set explicitly then the value of <code>ReachableAddresses</code> is used. If <code>HTTPProxy</code> is set then these connections will go through that proxy. (DEPRECATED: This option has had no effect for some time.)</p>
<p><strong>ReachableORAddresses IP[/MASK][:PORT]&hellip;</strong></p>
<p>Like <code>ReachableAddresses</code>, a list of addresses and ports. Tor will obey these restrictions when connecting to Onion Routers, using TLS/SSL. If not set explicitly then the value of <code>ReachableAddresses</code> is used. If <code>HTTPSProxy</code> is set then these connections will go through that proxy.</p>
<p>The separation between <code>ReachableORAddresses</code> and <code>ReachableDirAddresse</code>s is only interesting when you are connecting through proxies (see <code>HTTPProxy</code> and <code>HTTPSProxy</code>). Most proxies limit TLS connections (which Tor uses to connect to Onion Routers) to port 443, and some limit HTTP GET requests (which Tor uses for fetching directory information) to port 80.</p>
<p><strong>HidServAuth onion-address auth-cookie [service-name]</strong></p>
<p>Client authorization for a v2 hidden service. Valid onion addresses contain 16 characters in a-z2-7 plus <code>.onion</code>, and valid auth cookies contain 22 characters in A-Za-z0-9+/. The service name is only used for internal purposes, e.g., for Tor controllers. This option may be used multiple times for different hidden services. If a hidden service uses authorization and this option is not set, the hidden service is not accessible. Hidden services can be configured to require authorization using the <code>HiddenServiceAuthorizeClient</code> option.</p>
<p><strong>ClientOnionAuthDir path</strong></p>
<p>Path to the directory containing v3 hidden service authorization files. Each file is for a single onion address, and the files MUST have the suffix <code>.auth_private</code> (i.e. <code>bob_onion.auth_private</code>). The content format MUST be: <code>&lt;onion-address&gt;:descriptor:x25519:&lt;base32-encoded-privkey&gt;</code></p>
<p>The <code>&lt;onion-address&gt;</code> MUST NOT have the <code>.onion</code> suffix. The <code>&lt;base32-encoded-privkey&gt;</code> is the base32 representation of the raw key bytes only (32 bytes for x25519). See Appendix G in the <code>rend-spec-v3.txt</code> file of torspec for more information.</p>
<p><strong>LongLivedPorts PORTS</strong></p>
<p>A list of ports for services that tend to have long-running connections (e.g. chat and interactive shells). Circuits for streams that use these ports will contain only high-uptime nodes, to reduce the chance that a node will go down before the stream is finished. Note that the list is also honored for circuits (both client and service side) involving hidden services whose virtual port is in this list. (Default: 21, 22, 706, 1863, 5050, 5190, 5222, 5223, 6523, 6667, 6697, 8300)</p>
<p><strong>MapAddress address newaddress</strong></p>
<p>When a request for address arrives to Tor, it will transform to <code>newaddress</code> before processing it. For example, if you always want connections to <a href="http://www.example.com">www.example.com</a> to exit via torserver (where torserver is the fingerprint of the server), use <code>MapAddress www.example.com www.example.com.torserver.exit</code>.</p>
<p>If the value is prefixed with a <code>*.</code>, matches an entire domain. For example, if you always want connections to example.com and any if its subdomains to exit via torserver (where torserver is the fingerprint of the server), use <code>MapAddress *.example.com *.example.com.torserver.exit</code>. (Note the leading <code>*.</code> in each part of the directive.) You can also redirect all subdomains of a domain to a single address. For example, <code>MapAddress *.example.com www.example.com</code>. If the specified exit is not available, or the exit can not connect to the site, Tor will fail any connections to the mapped address.</p>
<p>NOTES:</p>
<ol>
<li>When evaluating <code>MapAddres</code>s expressions Tor stops when it hits the most recently added expression that matches the requested address. So if you have the following in your <code>torrc</code>, <a href="http://www.torproject.org">www.torproject.org</a> will map to 198.51.100.1:</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">MapAddress www.torproject.org 192.0.2.1
MapAddress www.torproject.org 198.51.100.1
</code></pre></div><ol start="2">
<li>Tor evaluates the <code>MapAddress</code> configuration until it finds no matches. So if you have the following in your <code>torrc</code>, <a href="http://www.torproject.org">www.torproject.org</a> will map to 203.0.113.1:</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">MapAddress 198.51.100.1 203.0.113.1
MapAddress www.torproject.org 198.51.100.1
</code></pre></div><ol start="3">
<li>The following <code>MapAddress</code> expression is invalid (and will be ignored) because you cannot map from a specific address to a wildcard address:</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">MapAddress www.torproject.org *.torproject.org.torserver.exit
</code></pre></div><ol start="4">
<li>
<p>Using a wildcard to match only part of a string (as in <code>*ample.com</code>) is also invalid.</p>
</li>
<li>
<p>Tor maps hostnames and IP addresses separately. If you <code>MapAddress</code> a DNS name, but use an IP address to connect, then Tor will ignore the DNS name mapping.</p>
</li>
<li>
<p><code>MapAddress</code> does not apply to redirects in the application protocol. For example, HTTP redirects and alt-svc headers will ignore mappings for the original address. You can use a wildcard mapping to handle redirects within the same site.</p>
</li>
</ol>
<p><strong>NewCircuitPeriod NUM</strong></p>
<p>Every <code>NUM</code> seconds consider whether to build a new circuit. (Default: 30 seconds)</p>
<p><strong>MaxCircuitDirtiness NUM</strong></p>
<p>Feel free to reuse a circuit that was first used at most <code>NUM</code> seconds ago, but never attach a new stream to a circuit that is too old. For hidden services, this applies to the last time a circuit was used, not the first. Circuits with streams constructed with SOCKS authentication via <code>SocksPorts</code> that have <code>KeepAliveIsolateSOCKSAuth</code> also remain alive for <code>MaxCircuitDirtiness</code> seconds after carrying the last such stream. (Default: 10 minutes)</p>
<p><strong>MaxClientCircuitsPending NUM</strong></p>
<p>Do not allow more than <code>NUM</code> circuits to be pending at a time for handling client streams. A circuit is pending if we have begun constructing it, but it has not yet been completely constructed. (Default: 32)</p>
<p><strong>NodeFamily node,node,&hellip;</strong></p>
<p>The Tor servers, defined by their identity fingerprints, constitute a &ldquo;family&rdquo; of similar or co-administered servers, so never use any two of them in the same circuit. Defining a NodeFamily is only needed when a server doesn’t list the family itself (with <code>MyFamily</code>). This option can be used multiple times; each instance defines a separate family. In addition to nodes, you can also list IP address and ranges and country codes in {curly braces}. See the <code>ExcludeNodes</code> option for more information on how to specify nodes.</p>
<p><strong>EnforceDistinctSubnets 0|1</strong></p>
<p>If 1, Tor will not put two servers whose IP addresses are &ldquo;too close&rdquo; on the same circuit. Currently, two addresses are &ldquo;too close&rdquo; if they lie in the same <code>/16</code> range. (Default: 1)</p>
<p><strong>SocksPort [address:]port|unix:path|auto [flags] [isolation flags]</strong></p>
<p>Open this port to listen for connections from SOCKS-speaking applications. Set this to 0 if you don’t want to allow application connections via SOCKS. Set it to auto to have Tor pick a port for you. This directive can be specified multiple times to bind to multiple addresses/ports. If a unix domain socket is used, you may quote the path using standard C escape sequences. (Default: 9050)</p>
<p>Note: Although this option allows you to specify an IP address other than localhost, you should do so only with extreme caution. The SOCKS protocol is unencrypted and (as we use it) unauthenticated, so exposing it in this way could leak your information to anybody watching your network, and allow anybody to use your computer as an open proxy.</p>
<p>If multiple entries of this option are present in your configuration file, Tor will perform stream isolation between listeners by default. The isolation flags arguments give Tor rules for which streams received on this SocksPort are allowed to share circuits with one another. Recognized isolation flags are:</p>
<p><em>IsolateClientAddr</em></p>
<p>Don’t share circuits with streams from a different client address. (On by default and strongly recommended when supported; you can disable it with <code>NoIsolateClientAddr</code>. Unsupported and force-disabled when using Unix domain sockets.)</p>
<p><em>IsolateSOCKSAuth</em></p>
<p>Don’t share circuits with streams for which different SOCKS authentication was provided. (For <code>HTTPTunnelPort</code> connections, this option looks at the <code>Proxy-Authorization</code> and <code>X-Tor-Stream-Isolation</code> headers. On by default; you can disable it with <code>NoIsolateSOCKSAuth</code>.)</p>
<p><em>IsolateClientProtocol</em></p>
<p>Don’t share circuits with streams using a different protocol. (SOCKS 4, SOCKS 5, TransPort connections, NATDPort connections, and DNSPort requests are all considered to be different protocols.)</p>
<p><em>IsolateDestPort</em></p>
<p>Don’t share circuits with streams targeting a different destination port.</p>
<p><em>IsolateDestAddr</em></p>
<p>Don’t share circuits with streams targeting a different destination address.</p>
<p><em>KeepAliveIsolateSOCKSAuth</em></p>
<p>If <code>IsolateSOCKSAuth</code> is enabled, keep alive circuits while they have at least one stream with SOCKS authentication active. After such a circuit is idle for more than <code>MaxCircuitDirtiness</code> seconds, it can be closed.</p>
<p><em>SessionGroup=INT</em></p>
<p>If no other isolation rules would prevent it, allow streams on this port to share circuits with streams from every other port with the same session group. (By default, streams received on different SocksPorts, TransPorts, etc are always isolated from one another. This option overrides that behavior.)</p>
<p>Other recognized flags for a SocksPort are:</p>
<p><em>NoIPv4Traffic</em></p>
<p>Tell exits to not connect to IPv4 addresses in response to SOCKS requests on this connection.</p>
<p><em>IPv6Traffic</em></p>
<p>Tell exits to allow IPv6 addresses in response to SOCKS requests on this connection, so long as SOCKS5 is in use. (SOCKS4 can’t handle IPv6.)</p>
<p><em>PreferIPv6</em></p>
<p>Tells exits that, if a host has both an IPv4 and an IPv6 address, we would prefer to connect to it via IPv6. (IPv4 is the default.)</p>
<p><em>NoDNSRequest</em></p>
<p>Do not ask exits to resolve DNS addresses in SOCKS5 requests. Tor will connect to IPv4 addresses, IPv6 addresses (if IPv6Traffic is set) and .onion addresses.</p>
<p>*NoOnionTraffic</p>
<p>Do not connect to .onion addresses in SOCKS5 requests.</p>
<p>*OnionTrafficOnly</p>
<p>Tell the tor client to only connect to <code>.onion</code> addresses in response to SOCKS5 requests on this connection. This is equivalent to <code>NoDNSRequest</code>, <code>NoIPv4Traffic</code>, <code>NoIPv6Traffic</code>. The corresponding <code>NoOnionTrafficOnly</code> flag is not supported.</p>
<p><em>CacheIPv4DNS</em></p>
<p>Tells the client to remember IPv4 DNS answers we receive from exit nodes via this connection.</p>
<p><em>CacheIPv6DNS</em></p>
<p>Tells the client to remember IPv6 DNS answers we receive from exit nodes via this connection.</p>
<p><em>GroupWritable</em></p>
<p>Unix domain sockets only: makes the socket get created as group-writable.</p>
<p><em>WorldWritable</em></p>
<p>Unix domain sockets only: makes the socket get created as world-writable.</p>
<p><em>CacheDNS</em></p>
<p>Tells the client to remember all DNS answers we receive from exit nodes via this connection.</p>
<p><em>UseIPv4Cache</em></p>
<p>Tells the client to use any cached IPv4 DNS answers we have when making requests via this connection. (NOTE: This option, or <code>UseIPv6Cache</code> or <code>UseDNSCache</code>, can harm your anonymity, and probably won’t help performance as much as you might expect. Use with care!)</p>
<p><em>UseIPv6Cache</em></p>
<p>Tells the client to use any cached IPv6 DNS answers we have when making requests via this connection.</p>
<p>UseDNSCache</p>
<p>Tells the client to use any cached DNS answers we have when making requests via this connection.</p>
<p><em>PreferIPv6Automap</em></p>
<p>When serving a hostname lookup request on this port that should get automapped (according to <code>AutomapHostsOnResolve</code>), if we could return either an IPv4 or an IPv6 answer, prefer an IPv6 answer. (On by default.)</p>
<p><em>PreferSOCKSNoAuth</em></p>
<p>Ordinarily, when an application offers both &ldquo;username/password authentication&rdquo; and &ldquo;no authentication&rdquo; to Tor via SOCKS5, Tor selects username/password authentication so that <code>IsolateSOCKSAuth</code> can work. This can confuse some applications, if they offer a username/password combination then get confused when asked for one. You can disable this behavior, so that Tor will select &ldquo;No authentication&rdquo; when <code>IsolateSOCKSAuth</code> is disabled, or when this option is set.</p>
<p>Flags are processed left to right. If flags conflict, the last flag on the line is used, and all earlier flags are ignored. No error is issued for conflicting flags.</p>
<p><strong>SocksPolicy policy,policy,&hellip;</strong></p>
<p>Set an entrance policy for this server, to limit who can connect to the SocksPort and DNSPort ports. The policies have the same form as exit policies below, except that port specifiers are ignored. Any address not matched by some entry in the policy is accepted.</p>
<p><strong>SocksTimeout NUM</strong></p>
<p>Let a socks connection wait <code>NUM</code> seconds handshaking, and <code>NUM</code> seconds unattached waiting for an appropriate circuit, before we fail it. (Default: 2 minutes)</p>
<p><strong>TokenBucketRefillInterval NUM [msec|second]</strong></p>
<p>Set the refill delay interval of Tor’s token bucket to <code>NUM</code> milliseconds. <code>NUM</code> must be between 1 and 1000, inclusive. When Tor is out of bandwidth, on a connection or globally, it will wait up to this long before it tries to use that connection again. Note that bandwidth limits are still expressed in bytes per second: this option only affects the frequency with which Tor checks to see whether previously exhausted connections may read again. Cannot be changed while Tor is running. (Default: 100 msec)</p>
<p><strong>TrackHostExits host,.domain,&hellip;</strong></p>
<p>For each value in the comma separated list, Tor will track recent connections to hosts that match this value and attempt to reuse the same exit node for each. If the value is prepended with a <code>.</code> it is treated as matching an entire domain. If one of the values is just a <code>.</code> it means match everything. This option is useful if you frequently connect to sites that will expire all your authentication cookies (i.e. log you out) if your IP address changes. Note that this option does have the disadvantage of making it more clear that a given history is associated with a single user. However, most people who would wish to observe this will observe it through cookies or other protocol-specific means anyhow.</p>
<p><strong>TrackHostExitsExpire NUM</strong></p>
<p>Since exit servers go up and down, it is desirable to expire the association between host and exit server after <code>NUM</code> seconds. The default is 1800 seconds (30 minutes).</p>
<p><strong>UpdateBridgesFromAuthority 0|1</strong></p>
<p>When set (along with <code>UseBridges</code>), Tor will try to fetch bridge descriptors from the configured bridge authorities when feasible. It will fall back to a direct request if the authority responds with a 404. (Default: 0)</p>
<p><strong>UseBridges 0|1</strong></p>
<p>When set, Tor will fetch descriptors for each bridge listed in the <code>Bridge</code> config lines, and use these relays as both entry guards and directory guards. (Default: 0)</p>
<p><strong>UseEntryGuards 0|1</strong></p>
<p>If this option is set to 1, we pick a few long-term entry servers, and try to stick with them. This is desirable because constantly changing servers increases the odds that an adversary who owns some servers will observe a fraction of your paths. Entry Guards can not be used by Directory Authorities or Single Onion Services. In these cases, this option is ignored. (Default: 1)</p>
<p><strong>GuardfractionFile FILENAME</strong></p>
<p>V3 authoritative directories only. Configures the location of the <code>guardfraction</code> file which contains information about how long relays have been guards. (Default: unset)</p>
<p><strong>UseGuardFraction 0|1|auto</strong></p>
<p>This option specifies whether clients should use the <code>guardfraction</code> information found in the consensus during path selection. If it’s set to auto, clients will do what the <code>UseGuardFraction</code> consensus parameter tells them to do. (Default: auto)</p>
<p><strong>NumEntryGuards NUM</strong></p>
<p>If <code>UseEntryGuards</code> is set to 1, we will try to pick a total of <code>NUM</code> routers as long-term entries for our circuits. If <code>NUM</code> is 0, we try to learn the number from the guard-n-primary-guards-to-use consensus parameter, and default to 1 if the consensus parameter isn’t set. (Default: 0)</p>
<p><strong>NumPrimaryGuards NUM</strong></p>
<p>If <code>UseEntryGuards</code> is set to 1, we will try to pick <code>NUM</code> routers for our primary guard list, which is the set of routers we strongly prefer when connecting to the Tor network. If <code>NUM</code> is 0, we try to learn the number from the guard-n-primary-guards consensus parameter, and default to 3 if the consensus parameter isn’t set. (Default: 0)</p>
<p><strong>NumDirectoryGuards NUM</strong></p>
<p>If <code>UseEntryGuards</code> is set to 1, we try to make sure we have at least <code>NUM</code> routers to use as directory guards. If this option is set to 0, use the value from the guard-n-primary-dir-guards-to-use consensus parameter, and default to 3 if the consensus parameter isn’t set. (Default: 0)</p>
<p><strong>GuardLifetime N days|weeks|months</strong></p>
<p>If <code>UseEntryGuards</code> is set, minimum time to keep a guard on our guard list before picking a new one. If less than one day, we use defaults from the consensus directory. (Default: 0)</p>
<p><strong>SafeSocks 0|1</strong></p>
<p>When this option is enabled, Tor will reject application connections that use unsafe variants of the socks protocol — ones that only provide an IP address, meaning the application is doing a DNS resolve first. Specifically, these are socks4 and socks5 when not doing remote DNS. (Default: 0)</p>
<p><strong>TestSocks 0|1</strong></p>
<p>When this option is enabled, Tor will make a notice-level log entry for each connection to the Socks port indicating whether the request used a safe socks protocol or an unsafe one (see above entry on <code>SafeSocks</code>). This helps to determine whether an application using Tor is possibly leaking DNS requests. (Default: 0)</p>
<p><strong>VirtualAddrNetworkIPv4 IPv4Address/bits</strong></p>
<p><strong>VirtualAddrNetworkIPv6 [IPv6Address]/bits</strong></p>
<p>When Tor needs to assign a virtual (unused) address because of a <code>MAPADDRESS</code> command from the controller or the <code>AutomapHostsOnResolve</code> feature, Tor picks an unassigned address from this range. (Defaults: <code>127.192.0.0/10</code> and <code>[FE80::]/10</code> respectively.)</p>
<p>When providing proxy server service to a network of computers using a tool like <code>dns-proxy-tor</code>, change the IPv4 network to <code>10.192.0.0/10</code> or <code>172.16.0.0/12</code> and change the IPv6 network to <code>[FC00::]/7</code>. The default <code>VirtualAddrNetwork</code> address ranges on a properly configured machine will route to the loopback or link-local interface. The maximum number of bits for the network prefix is set to 104 for IPv6 and 16 for IPv4. However, a wider network (smaller prefix length) is preferable since it reduces the chances for an attacker to guess the used IP. For local use, no change to the default <code>VirtualAddrNetwork</code> setting is needed.</p>
<p><strong>AllowNonRFC953Hostnames 0|1</strong></p>
<p>When this option is disabled, Tor blocks hostnames containing illegal characters (like <code>@</code> and <code>:</code>) rather than sending them to an exit node to be resolved. This helps trap accidental attempts to resolve URLs and so on. (Default: 0)</p>
<p><strong>HTTPTunnelPort [address:]port|auto [isolation flags]</strong></p>
<p>Open this port to listen for proxy connections using the <code>HTTP CONNECT</code> protocol instead of SOCKS. Set this to 0 if you don’t want to allow <code>HTTP CONNECT</code> connections. Set the port to auto to have Tor pick a port for you. This directive can be specified multiple times to bind to multiple addresses/ports. If multiple entries of this option are present in your configuration file, Tor will perform stream isolation between listeners by default. See <code>SOCKSPort</code> for an explanation of isolation flags. (Default: 0)</p>
<p><strong>TransPort [address:]port|auto [isolation flags]</strong></p>
<p>Open this port to listen for transparent proxy connections. Set this to 0 if you don’t want to allow transparent proxy connections. Set the port to auto to have Tor pick a port for you. This directive can be specified multiple times to bind to multiple addresses/ports. If multiple entries of this option are present in your configuration file, Tor will perform stream isolation between listeners by default. See SOCKSPort for an explanation of isolation flags.</p>
<p><code>TransPort</code> requires OS support for transparent proxies, such as BSD&rsquo;s <code>pf</code> or Linux’s <code>iptables</code>. If you’re planning to use Tor as a transparent proxy for a network, you’ll want to examine and change <code>VirtualAddrNetwork</code> from the default setting. (Default: 0)</p>
<p><strong>TransProxyType default|TPROXY|ipfw|pf-divert</strong></p>
<p><code>TransProxyType</code> may only be enabled when there is transparent proxy listener enabled.</p>
<p>Set this to <code>TPROXY</code> if you wish to be able to use the <code>TPROXY</code> Linux module to transparently proxy connections that are configured using the <code>TransPort</code> option. Detailed information on how to configure the <code>TPROXY</code> feature can be found in the Linux kernel source tree in the file <code>Documentation/networking/tproxy.txt</code>.</p>
<p>Set this option to <code>ipfw</code> to use the FreeBSD <code>ipfw</code> interface.</p>
<p>On *BSD operating systems when using <code>pf</code>, set this to <code>pf-divert</code> to take advantage of divert-to rules, which do not modify the packets like rdr-to rules do. Detailed information on how to configure pf to use divert-to rules can be found in the pf.conf(5) manual page. On OpenBSD, divert-to is available to use on versions greater than or equal to OpenBSD 4.4.</p>
<p>Set this to <code>default</code>, or leave it unconfigured, to use regular <code>iptables</code> on Linux, or to use <code>pf</code> rdr-to rules on *BSD systems.</p>
<p>(Default: &ldquo;default&rdquo;)</p>
<p><strong>NATDPort [address:]port|auto [isolation flags]</strong></p>
<p>Open this port to listen for connections from old versions of <code>ipfw</code> (as included in old versions of FreeBSD, etc) using the NATD protocol. Use 0 if you don’t want to allow NATD connections. Set the port to &ldquo;auto&rdquo; to have Tor pick a port for you. This directive can be specified multiple times to bind to multiple addresses/ports. If multiple entries of this option are present in your configuration file, Tor will perform stream isolation between listeners by default. See <code>SocksPort</code> for an explanation of isolation flags. This option is only for people who cannot use <code>TransPort</code>. (Default: 0)</p>
<p><strong>AutomapHostsOnResolve 0|1</strong></p>
<p>When this option is enabled, and we get a request to resolve an address that ends with one of the suffixes in <code>AutomapHostsSuffixes</code>, we map an unused virtual address to that address, and return the new virtual address. This is handy for making <code>.onion</code> addresses work with applications that resolve an address and then connect to it. (Default: 0)</p>
<p><strong>AutomapHostsSuffixes SUFFIX,SUFFIX,&hellip;</strong></p>
<p>A comma-separated list of suffixes to use with <code>AutomapHostsOnResolve</code>. The <code>.</code> suffix is equivalent to &ldquo;all addresses.&rdquo; (Default: <code>.exit</code>,<code>.onion)</code>.</p>
<p><strong>DNSPort [address:]port|auto [isolation flags]</strong></p>
<p>If non-zero, open this port to listen for UDP DNS requests, and resolve them anonymously. This port only handles A, AAAA, and PTR requests &ndash; it doesn’t handle arbitrary DNS request types. Set the port to auto to have Tor pick a port for you. This directive can be specified multiple times to bind to multiple addresses/ports. See <code>SocksPort</code> for an explanation of isolation flags. (Default: 0)</p>
<p><strong>ClientDNSRejectInternalAddresses 0|1</strong></p>
<p>If true, Tor does not believe any anonymously retrieved DNS answer that tells it that an address resolves to an internal address (like <code>127.0.0.1</code> or <code>192.168.0.1</code>). This option prevents certain browser-based attacks; it is not allowed to be set on the default network. (Default: 1)</p>
<p><strong>ClientRejectInternalAddresses 0|1</strong></p>
<p>If true, Tor does not try to fulfill requests to connect to an internal address (like <code>127.0.0.1</code> or <code>192.168.0.1</code>) unless an exit node is specifically requested (for example, via a <code>.exit</code> hostname, or a controller request). If true, multicast DNS hostnames for machines on the local network (of the form <code>*.local</code>) are also rejected. (Default: 1)</p>
<p><strong>DownloadExtraInfo 0|1</strong></p>
<p>If true, Tor downloads and caches <code>extra-info</code> documents. These documents contain information about servers other than the information in their regular server descriptors. Tor does not use this information for anything itself; to save bandwidth, leave this option turned off. (Default: 0)</p>
<p><strong>WarnPlaintextPorts port,port,&hellip;</strong></p>
<p>Tells Tor to issue a warnings whenever the user tries to make an anonymous connection to one of these ports. This option is designed to alert users to services that risk sending passwords in the clear. (Default: 23,109,110,143)</p>
<p><strong>RejectPlaintextPorts port,port,&hellip;</strong></p>
<p>Like <code>WarnPlaintextPorts</code>, but instead of warning about risky port uses, Tor will instead refuse to make the connection. (Default: None)</p>
<p><strong>OptimisticData 0|1|auto</strong></p>
<p>When this option is set, and Tor is using an exit node that supports the feature, it will try optimistically to send data to the exit node without waiting for the exit node to report whether the connection succeeded. This can save a round-trip time for protocols like HTTP where the client talks first. If <code>OptimisticData</code> is set to auto, Tor will look at the <code>UseOptimisticData</code> parameter in the <code>networkstatus</code>. (Default: auto)</p>
<p><strong>HSLayer2Nodes node,node,&hellip;</strong></p>
<p>A list of identity fingerprints, nicknames, country codes, and address patterns of nodes that are allowed to be used as the second hop in all client or service-side Onion Service circuits. This option mitigates attacks where the adversary runs middle nodes and induces your client or service to create many circuits, in order to discover your primary guard node. (Default: Any node in the network may be used in the second hop.)</p>
<p>(Example: <code>HSLayer2Nodes ABCD1234CDEF5678ABCD1234CDEF5678ABCD1234, {cc}, 255.254.0.0/8</code>)</p>
<p>When this is set, the resulting hidden service paths will look like:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">C - G - L2 - M - Rend
C - G - L2 - M - HSDir
C - G - L2 - M - Intro
S - G - L2 - M - Rend
S - G - L2 - M - HSDir
S - G - L2 - M - Intro
</code></pre></div><p>where <code>C</code> is this client, <code>S</code> is the service, <code>G</code> is the Guard node, <code>L2</code> is a node from this option, and <code>M</code> is a random middle node. <code>Rend</code>, <code>HSDir</code>, and <code>Intro</code> point selection is not affected by this option.</p>
<p>This option may be combined with <code>HSLayer3Nodes</code> to create paths of the form:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">C - G - L2 - L3 - Rend
C - G - L2 - L3 - M - HSDir
C - G - L2 - L3 - M - Intro
S - G - L2 - L3 - M - Rend
S - G - L2 - L3 - HSDir
S - G - L2 - L3 - Intro
</code></pre></div><p><code>ExcludeNodes</code> have higher priority than <code>HSLayer2Nodes</code>, which means that nodes specified in <code>ExcludeNodes</code> will not be picked.</p>
<p>When either this option or <code>HSLayer3Nodes</code> are set, the <code>/16</code> subnet and node family restrictions are removed for hidden service circuits. Additionally, we allow the guard node to be present as the <code>Rend</code>, <code>HSDir</code>, and <code>IP</code> node, and as the hop before it. This is done to prevent the adversary from inferring information about our guard, layer2, and layer3 node choices at later points in the path.</p>
<p>This option is meant to be managed by a Tor controller such as <a href="https://github.com/mikeperry-tor/vanguards">https://github.com/mikeperry-tor/vanguards</a> that selects and updates this set of nodes for you.</p>
<p>Hence it does not do load balancing if fewer than 20 nodes are selected, and if no nodes in <code>HSLayer2Nodes</code> are currently available for use, Tor will not work.</p>
<p>Please use extreme care if you are setting this option manually.</p>
<p><strong>HSLayer3Nodes node,node,&hellip;</strong></p>
<p>A list of identity fingerprints, nicknames, country codes, and address patterns of nodes that are allowed to be used as the third hop in all client and service-side Onion Service circuits. This option mitigates attacks where the adversary runs middle nodes and induces your client or service to create many circuits, in order to discover your primary or Layer2 guard nodes. (Default: Any node in the network may be used in the third hop.)</p>
<p>(Example: <code>HSLayer3Nodes ABCD1234CDEF5678ABCD1234CDEF5678ABCD1234, {cc}, 255.254.0.0/8</code>)</p>
<p>When this is set by itself, the resulting hidden service paths will look like:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">C - G - M - L3 - Rend
C - G - M - L3 - M - HSDir
C - G - M - L3 - M - Intro
S - G - M - L3 - M - Rend
S - G - M - L3 - HSDir
S - G - M - L3 - Intro
</code></pre></div><p>where <code>C</code> is this client, <code>S</code> is the service, <code>G</code> is the Guard node, <code>L2</code> is a node from this option, and <code>M</code> is a random middle node. <code>Rend</code>, <code>HSDir</code>, and <code>Intro</code> point selection is not affected by this option.</p>
<p>While it is possible to use this option by itself, it should be combined with <code>HSLayer2Nodes</code> to create paths of the form:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">C - G - L2 - L3 - Rend
C - G - L2 - L3 - M - HSDir
C - G - L2 - L3 - M - Intro
S - G - L2 - L3 - M - Rend
S - G - L2 - L3 - HSDir
S - G - L2 - L3 - Intro
</code></pre></div><p><code>ExcludeNodes</code> have higher priority than <code>HSLayer3Nodes</code>, which means that nodes specified in <code>ExcludeNodes</code> will not be picked.</p>
<p>When either this option or <code>HSLayer2Nodes</code> are set, the <code>/16</code> subnet and node family restrictions are removed for hidden service circuits. Additionally, we allow the guard node to be present as the <code>Rend</code>, <code>HSDir</code>, and <code>IP</code> node, and as the hop before it. This is done to prevent the adversary from inferring information about our guard, layer2, and layer3 node choices at later points in the path.</p>
<p>This option is meant to be managed by a Tor controller such as <a href="https://github.com/mikeperry-tor/vanguards">https://github.com/mikeperry-tor/vanguards</a> that selects and updates this set of nodes for you.</p>
<p>Hence it does not do load balancing if fewer than 20 nodes are selected, and if no nodes in <code>HSLayer3Nodes</code> are currently available for use, Tor will not work.</p>
<p>Please use extreme care if you are setting this option manually.</p>
<p><strong>UseMicrodescriptors 0|1|auto</strong></p>
<p>Microdescriptors are a smaller version of the information that Tor needs in order to build its circuits. Using microdescriptors makes Tor clients download less directory information, thus saving bandwidth. Directory caches need to fetch regular descriptors and microdescriptors, so this option doesn’t save any bandwidth for them. For legacy reasons, auto is accepted, but it has the same effect as 1. (Default: auto)</p>
<p><strong>PathBiasCircThreshold NUM</strong> <strong>PathBiasNoticeRate NUM</strong></p>
<p><strong>PathBiasWarnRate NUM</strong></p>
<p><strong>PathBiasExtremeRate NUM</strong></p>
<p><strong>PathBiasDropGuards NUM</strong></p>
<p><strong>PathBiasScaleThreshold NUM</strong></p>
<p>These options override the default behavior of Tor’s (currently experimental) path bias detection algorithm. To try to find broken or misbehaving guard nodes, Tor looks for nodes where more than a certain fraction of circuits through that guard fail to get built.</p>
<p>The <code>PathBiasCircThreshold</code> option controls how many circuits we need to build through a guard before we make these checks. The <code>PathBiasNoticeRate</code>, <code>PathBiasWarnRate</code> and <code>PathBiasExtremeRate</code> options control what fraction of circuits must succeed through a guard so we won’t write log messages. If less than <code>PathBiasExtremeRate</code> circuits succeed and <code>PathBiasDropGuard</code>s is set to 1, we disable use of that guard.</p>
<p>When we have seen more than <code>PathBiasScaleThreshold</code> circuits through a guard, we scale our observations by 0.5 (governed by the consensus) so that new observations don’t get swamped by old ones.</p>
<p>By default, or if a negative value is provided for one of these options, Tor uses reasonable defaults from the networkstatus consensus document. If no defaults are available there, these options default to 150, .70, .50, .30, 0, and 300 respectively.</p>
<p><strong>PathBiasUseThreshold NUM</strong></p>
<p><strong>PathBiasNoticeUseRate NUM</strong></p>
<p><strong>PathBiasExtremeUseRate NUM</strong></p>
<p><strong>PathBiasScaleUseThreshold NUM</strong></p>
<p>Similar to the above options, these options override the default behavior of Tor’s (currently experimental) path use bias detection algorithm.</p>
<p>Where as the path bias parameters govern thresholds for successfully building circuits, these four path use bias parameters govern thresholds only for circuit usage. Circuits which receive no stream usage are not counted by this detection algorithm. A used circuit is considered successful if it is capable of carrying streams or otherwise receiving well-formed responses to RELAY cells.</p>
<p>By default, or if a negative value is provided for one of these options, Tor uses reasonable defaults from the networkstatus consensus document. If no defaults are available there, these options default to 20, .80, .60, and 100, respectively.</p>
<p><strong>ClientUseIPv4 0|1</strong></p>
<p>If this option is set to 0, Tor will avoid connecting to directory servers and entry nodes over IPv4. Note that clients with an IPv4 address in a Bridge, proxy, or pluggable transport line will try connecting over IPv4 even if <code>ClientUseIPv4</code> is set to 0. (Default: 1)</p>
<p><strong>ClientUseIPv6 0|1</strong></p>
<p>If this option is set to 1, Tor might connect to directory servers or entry nodes over IPv6. For IPv6 only hosts, you need to also set <code>ClientUseIPv4</code> to 0 to disable IPv4. Note that clients configured with an IPv6 address in a Bridge, proxy, or pluggable transport line will try connecting over IPv6 even if <code>ClientUseIPv6</code> is set to 0. (Default: 0)</p>
<p><strong>ClientPreferIPv6DirPort 0|1|auto</strong></p>
<p>If this option is set to 1, Tor prefers a directory port with an IPv6 address over one with IPv4, for direct connections, if a given directory server has both. (Tor also prefers an IPv6 DirPort if <code>IPv4Client</code> is set to 0.) If this option is set to auto, clients prefer IPv4. Other things may influence the choice. This option breaks a tie to the favor of IPv6. (Default: auto) (DEPRECATED: This option has had no effect for some time.)</p>
<p><strong>ClientPreferIPv6ORPort 0|1|auto</strong></p>
<p>If this option is set to 1, Tor prefers an OR port with an IPv6 address over one with IPv4 if a given entry node has both. (Tor also prefers an IPv6 <code>ORPort</code> if <code>IPv4Client</code> is set to 0.) If this option is set to auto, Tor bridge clients prefer the configured bridge address, and other clients prefer IPv4. Other things may influence the choice. This option breaks a tie to the favor of IPv6. (Default: auto)</p>
<p><strong>ClientAutoIPv6ORPort 0|1</strong></p>
<p>If this option is set to 1, Tor clients randomly prefer a node’s IPv4 or IPv6 ORPort. The random preference is set every time a node is loaded from a new consensus or bridge config. When this option is set to 1, <code>ClientPreferIPv6ORPort</code> is ignored. (Default: 0)</p>
<p><strong>PathsNeededToBuildCircuits NUM</strong></p>
<p>Tor clients don’t build circuits for user traffic until they know about enough of the network so that they could potentially construct enough of the possible paths through the network. If this option is set to a fraction between 0.25 and 0.95, Tor won’t build circuits until it has enough descriptors or microdescriptors to construct that fraction of possible paths. Note that setting this option too low can make your Tor client less anonymous, and setting it too high can prevent your Tor client from bootstrapping. If this option is negative, Tor will use a default value chosen by the directory authorities. If the directory authorities do not choose a value, Tor will default to 0.6. (Default: -1)</p>
<p><strong>ClientBootstrapConsensusAuthorityDownloadInitialDelay N</strong></p>
<p>Initial delay in seconds for when clients should download consensuses from authorities if they are bootstrapping (that is, they don’t have a usable, reasonably live consensus). Only used by clients fetching from a list of fallback directory mirrors. This schedule is advanced by (potentially concurrent) connection attempts, unlike other schedules, which are advanced by connection failures. (Default: 6)</p>
<p><strong>ClientBootstrapConsensusFallbackDownloadInitialDelay N</strong></p>
<p>Initial delay in seconds for when clients should download consensuses from fallback directory mirrors if they are bootstrapping (that is, they don’t have a usable, reasonably live consensus). Only used by clients fetching from a list of fallback directory mirrors. This schedule is advanced by (potentially concurrent) connection attempts, unlike other schedules, which are advanced by connection failures. (Default: 0)</p>
<p><strong>ClientBootstrapConsensusAuthorityOnlyDownloadInitialDelay N</strong></p>
<p>Initial delay in seconds for when clients should download consensuses from authorities if they are bootstrapping (that is, they don’t have a usable, reasonably live consensus). Only used by clients which don’t have or won’t fetch from a list of fallback directory mirrors. This schedule is advanced by (potentially concurrent) connection attempts, unlike other schedules, which are advanced by connection failures. (Default: 0)</p>
<p><strong>ClientBootstrapConsensusMaxInProgressTries NUM</strong></p>
<p>Try this many simultaneous connections to download a consensus before waiting for one to complete, timeout, or error out. (Default: 3)</p>
<p><strong>DormantClientTimeout N minutes|hours|days|weeks</strong></p>
<p>If Tor spends this much time without any client activity, enter a dormant state where automatic circuits are not built, and directory information is not fetched. Does not affect servers or onion services. Must be at least 10 minutes. (Default: 24 hours)</p>
<p><strong>DormantTimeoutDisabledByIdleStreams 0|1</strong></p>
<p>If true, then any open client stream (even one not reading or writing) counts as client activity for the purpose of <code>DormantClientTimeout</code>. If false, then only network activity counts. (Default: 1)</p>
<p><strong>DormantOnFirstStartup 0|1</strong></p>
<p>If true, then the first time Tor starts up with a fresh DataDirectory, it starts in dormant mode, and takes no actions until the user has made a request. (This mode is recommended if installing a Tor client for a user who might not actually use it.) If false, Tor bootstraps the first time it is started, whether it sees a user request or not. After the first time Tor starts, it begins in dormant mode if it was dormant before, and not otherwise. (Default: 0)</p>
<p><strong>DormantCanceledByStartup 0|1</strong></p>
<p>By default, Tor starts in active mode if it was active the last time it was shut down, and in dormant mode if it was dormant. But if this option is true, Tor treats every startup event as user activity, and Tor will never start in Dormant mode, even if it has been unused for a long time on previous runs. (Default: 0)</p>
<p>Note: Packagers and application developers should change the value of this option only with great caution: it has the potential to create spurious traffic on the network. This option should only be used if Tor is started by an affirmative user activity (like clicking on an applcation or running a command), and not if Tor is launched for some other reason (for example, by a startup process, or by an application that launches itself on every login.)</p>
<h2 id="server-options">SERVER OPTIONS</h2>
<p>The following options are useful only for servers (that is, if <code>ORPort</code> is non-zero):</p>
<p><strong>Address address</strong></p>
<p>The IPv4 address of this server, or a fully qualified domain name of this server that resolves to an IPv4 address. You can leave this unset, and Tor will try to guess your IPv4 address. This IPv4 address is the one used to tell clients and other servers where to find your Tor server; it doesn’t affect the address that your server binds to. To bind to a different address, use the <code>ORPort</code> and <code>OutboundBindAddress</code> options.</p>
<p><strong>AssumeReachable 0|1</strong></p>
<p>This option is used when bootstrapping a new Tor network. If set to 1, don’t do self-reachability testing; just upload your server descriptor immediately. If <code>AuthoritativeDirectory</code> is also set, this option instructs the dirserver to bypass remote reachability testing too and list all connected servers as running.</p>
<p><strong>BridgeRelay 0|1</strong></p>
<p>Sets the relay to act as a &ldquo;bridge&rdquo; with respect to relaying connections from bridge users to the Tor network. It mainly causes Tor to publish a server descriptor to the bridge database, rather than to the public directory authorities.</p>
<p>Note: make sure that no <code>MyFamily</code> lines are present in your <code>torrc</code> when relay is configured in bridge mode.</p>
<p><strong>BridgeDistribution string</strong></p>
<p>If set along with <code>BridgeRelay</code>, Tor will include a new line in its bridge descriptor which indicates to the BridgeDB service how it would like its bridge address to be given out. Set it to none if you want BridgeDB to avoid distributing your bridge address, or any to let BridgeDB decide. (Default: any)</p>
<p><strong>ContactInfo email_address</strong></p>
<p>Administrative contact information for this relay or bridge. This line can be used to contact you if your relay or bridge is misconfigured or something else goes wrong. Note that we archive and publish all descriptors containing these lines and that Google indexes them, so spammers might also collect them. You may want to obscure the fact that it’s an email address and/or generate a new address for this purpose.</p>
<p><code>ContactInfo</code> must be set to a working address if you run more than one relay or bridge. (Really, everybody running a relay or bridge should set it.)</p>
<p><strong>ExitRelay 0|1|auto</strong></p>
<p>Tells Tor whether to run as an exit relay. If Tor is running as a non-bridge server, and <code>ExitRelay</code> is set to 1, then Tor allows traffic to exit according to the ExitPolicy option, the <code>ReducedExitPolicy</code> option, or the default <code>ExitPolicy</code> (if no other exit policy option is specified).</p>
<p>If <code>ExitRelay</code> is set to 0, no traffic is allowed to exit, and the <code>ExitPolicy</code>, <code>ReducedExitPolicy</code>, and <code>IPv6Exit</code> options are ignored.</p>
<p>If <code>ExitRelay</code> is set to auto, then Tor checks the <code>ExitPolicy</code>, <code>ReducedExitPolicy</code>, and <code>IPv6Exit</code> options. If at least one of these options is set, Tor behaves as if <code>ExitRelay</code> were set to 1. If none of these exit policy options are set, Tor behaves as if <code>ExitRelay</code> were set to 0. (Default: auto)</p>
<p><strong>ExitPolicy policy,policy,&hellip;</strong></p>
<p>Set an exit policy for this server. Each policy is of the form <code>accept[6]|reject[6] ADDR[/MASK][:PORT]</code>. If <code>/MASK</code> is omitted then this policy just applies to the host given. Instead of giving a host or network you can also use <code>*</code> to denote the universe (<code>0.0.0.0/0</code> and <code>::/0</code>), or <code>*4</code> to denote all IPv4 addresses, and <code>*6</code> to denote all IPv6 addresses. <code>PORT</code> can be a single port number, an interval of ports <code>FROM_PORT-TO_PORT</code>, or <code>*</code>. If <code>PORT</code> is omitted, that means <code>*</code>.</p>
<p>For example, <code>accept 18.7.22.69:*,reject 18.0.0.0/8:*,accept *:*</code> would reject any IPv4 traffic destined for MIT except for web.mit.edu, and accept any other IPv4 or IPv6 traffic.</p>
<p>Tor also allows IPv6 exit policy entries. For instance, <code>reject6 [FC00::]/7:*</code> rejects all destinations that share 7 most significant bit prefix with address FC00::. Respectively, <code>accept6 [C000::]/3:*</code> accepts all destinations that share 3 most significant bit prefix with address C000::.</p>
<p><code>accept6</code> and <code>reject6</code> only produce IPv6 exit policy entries. Using an IPv4 address with <code>accept6</code> or <code>reject6</code> is ignored and generates a warning. <code>accept</code>/<code>reject</code> allows either IPv4 or IPv6 addresses. Use <code>*4</code> as an IPv4 wildcard address, and <code>*6</code> as an IPv6 wildcard address. accept/reject * expands to matching IPv4 and IPv6 wildcard address rules.</p>
<p>To specify all IPv4 and IPv6 internal and link-local networks (including <code>0.0.0.0/8</code>, <code>169.254.0.0/16</code>, <code>127.0.0.0/8</code>, <code>192.168.0.0/16</code>, <code>10.0.0.0/8</code>, <code>172.16.0.0/12</code>, <code>[::]/8</code>, <code>[FC00::]/7</code>, <code>[FE80::]/10</code>, <code>[FEC0::]/10</code>, <code>[FF00::]/8</code>, and <code>[::]/127</code>), you can use the <code>private</code> alias instead of an address. (<code>private</code> always produces rules for IPv4 and IPv6 addresses, even when used with <code>accept6</code>/<code>reject6</code>.)</p>
<p>Private addresses are rejected by default (at the beginning of your exit policy), along with any configured primary public IPv4 and IPv6 addresses. These private addresses are rejected unless you set the <code>ExitPolicyRejectPrivate</code> config option to 0. For example, once you’ve done that, you could allow HTTP to <code>127.0.0.1</code> and block all other connections to internal networks with <code>accept 127.0.0.1:80,reject private:*</code>, though that may also allow connections to your own computer that are addressed to its public (external) IP address. See RFC 1918 and RFC 3330 for more details about internal and reserved IP address space.</p>
<p>See <code>ExitPolicyRejectLocalInterfaces</code> if you want to block every address on the relay, even those that aren’t advertised in the descriptor.</p>
<p>This directive can be specified multiple times so you don’t have to put it all on one line.</p>
<p>Policies are considered first to last, and the first match wins. If you want to allow the same ports on IPv4 and IPv6, write your rules using <code>accept/reject *</code>. If you want to allow different ports on IPv4 and IPv6, write your IPv6 rules using <code>accept6/reject6 *6</code>, and your IPv4 rules using <code>accept/reject *4</code>. If you want to replace the default exit policy, end your exit policy with either a <code>reject *:*</code> or an <code>accept *:*</code>. Otherwise, you’re augmenting (prepending to) the default exit policy.</p>
<p>If you want to use a reduced exit policy rather than the default exit policy, set <code>ReducedExitPolicy 1</code>. If you want to replace the default exit policy with your custom exit policy, end your exit policy with either a <code>reject :</code> or an <code>accept :</code>. Otherwise, you’re augmenting (prepending to) the default or reduced exit policy.</p>
<p>The default exit policy is:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">reject *:25
reject *:119
reject *:135-139
reject *:445
reject *:563
reject *:1214
reject *:4661-4666
reject *:6346-6429
reject *:6699
reject *:6881-6999
accept *:*
</code></pre></div><p>Since the default exit policy uses <code>accept/reject *</code>, it applies to both IPv4 and IPv6 addresses.</p>
<p><strong>ExitPolicyRejectPrivate 0|1</strong></p>
<p>Reject all private (local) networks, along with the relay’s advertised public IPv4 and IPv6 addresses, at the beginning of your exit policy. See above entry on <code>ExitPolicy</code>. (Default: 1)</p>
<p><strong>ExitPolicyRejectLocalInterfaces 0|1</strong></p>
<p>Reject all IPv4 and IPv6 addresses that the relay knows about, at the beginning of your exit policy. This includes any <code>OutboundBindAddress</code>, the bind addresses of any port options, such as <code>ControlPort</code> or <code>DNSPort</code>, and any public IPv4 and IPv6 addresses on any interface on the relay. (If <code>IPv6Exit</code> is not set, all IPv6 addresses will be rejected anyway.) See above entry on <code>ExitPolicy</code>. This option is off by default, because it lists all public relay IP addresses in the <code>ExitPolicy</code>, even those relay operators might prefer not to disclose. (Default: 0)</p>
<p><strong>ReducedExitPolicy 0|1</strong></p>
<p>If set, use a reduced exit policy rather than the default one.</p>
<p>The reduced exit policy is an alternative to the default exit policy. It allows as many Internet services as possible while still blocking the majority of TCP ports. Currently, the policy allows approximately 65 ports. This reduces the odds that your node will be used for peer-to-peer applications.</p>
<p>The reduced exit policy is:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">accept *:20-21
accept *:22
accept *:23
accept *:43
accept *:53
accept *:79
accept *:80-81
accept *:88
accept *:110
accept *:143
accept *:194
accept *:220
accept *:389
accept *:443
accept *:464
accept *:465
accept *:531
accept *:543-544
accept *:554
accept *:563
accept *:587
accept *:636
accept *:706
accept *:749
accept *:873
accept *:902-904
accept *:981
accept *:989-990
accept *:991
accept *:992
accept *:993
accept *:994
accept *:995
accept *:1194
accept *:1220
accept *:1293
accept *:1500
accept *:1533
accept *:1677
accept *:1723
accept *:1755
accept *:1863
accept *:2082
accept *:2083
accept *:2086-2087
accept *:2095-2096
accept *:2102-2104
accept *:3128
accept *:3389
accept *:3690
accept *:4321
accept *:4643
accept *:5050
accept *:5190
accept *:5222-5223
accept *:5228
accept *:5900
accept *:6660-6669
accept *:6679
accept *:6697
accept *:8000
accept *:8008
accept *:8074
accept *:8080
accept *:8082
accept *:8087-8088
accept *:8232-8233
accept *:8332-8333
accept *:8443
accept *:8888
accept *:9418
accept *:9999
accept *:10000
accept *:11371
accept *:19294
accept *:19638
accept *:50002
accept *:64738
reject *:*
</code></pre></div><p>(Default: 0)</p>
<p><strong>IPv6Exit 0|1</strong></p>
<p>If set, and we are an exit node, allow clients to use us for IPv6 traffic. When this option is set and <code>ExitRelay</code> is auto, we act as if <code>ExitRelay</code> is 1. (Default: 0)</p>
<p><strong>MaxOnionQueueDelay NUM [msec|second]</strong></p>
<p>If we have more onionskins queued for processing than we can process in this amount of time, reject new ones. (Default: 1750 msec)</p>
<p><strong>MyFamily fingerprint,fingerprint,&hellip;</strong></p>
<p>Declare that this Tor relay is controlled or administered by a group or organization identical or similar to that of the other relays, defined by their (possibly $-prefixed) identity fingerprints. This option can be repeated many times, for convenience in defining large families: all fingerprints in all <code>MyFamily</code> lines are merged into one list. When two relays both declare that they are in the same &lsquo;family&rsquo;, Tor clients will not use them in the same circuit. (Each relay only needs to list the other servers in its family; it doesn’t need to list itself, but it won’t hurt if it does.) Do not list any bridge relay as it would compromise its concealment.</p>
<p>When listing a node, it’s better to list it by fingerprint than by nickname: fingerprints are more reliable.</p>
<p>If you run more than one relay, the <code>MyFamily</code> option on each relay must list all other relays, as described above.</p>
<p>Note: do not use <code>MyFamily</code> when configuring your Tor instance as a bridge.</p>
<p><strong>Nickname name</strong></p>
<p>Set the server’s nickname to <code>name</code>. Nicknames must be between 1 and 19 characters inclusive, and must contain only the characters [a-zA-Z0-9]. If not set, <code>Unnamed</code> will be used. Relays can always be uniquely identified by their identity fingerprints.</p>
<p><strong>NumCPUs num</strong></p>
<p>How many processes to use at once for decrypting onionskins and other parallelizable operations. If this is set to 0, Tor will try to detect how many CPUs you have, defaulting to 1 if it can’t tell. (Default: 0)</p>
<p><strong>ORPort [address:]PORT|auto [flags]</strong></p>
<p>Advertise this port to listen for connections from Tor clients and servers. This option is required to be a Tor server. Set it to auto to have Tor pick a port for you. Set it to 0 to not run an <code>ORPort</code> at all. This option can occur more than once. (Default: 0)</p>
<p>Tor recognizes these flags on each ORPort:</p>
<p><em>NoAdvertise</em></p>
<p>By default, we bind to a port and tell our users about it. If <code>NoAdvertise</code> is specified, we don’t advertise, but listen anyway. This can be useful if the port everybody will be connecting to (for example, one that’s opened on our firewall) is somewhere else.</p>
<p><em>NoListen</em></p>
<p>By default, we bind to a port and tell our users about it. If <code>NoListen</code> is specified, we don’t bind, but advertise anyway. This can be useful if something else (for example, a firewall’s port forwarding configuration) is causing connections to reach us.</p>
<p><em>IPv4Only</em></p>
<p>If the address is absent, or resolves to both an IPv4 and an IPv6 address, only listen to the IPv4 address.</p>
<p><em>IPv6Only</em></p>
<p>If the address is absent, or resolves to both an IPv4 and an IPv6 address, only listen to the IPv6 address.</p>
<p>For obvious reasons, <code>NoAdvertise</code> and <code>NoListen</code> are mutually exclusive, and <code>IPv4Only</code> and <code>IPv6Only</code> are mutually exclusive.</p>
<p><strong>PublishServerDescriptor 0|1|v3|bridge,&hellip;</strong></p>
<p>This option specifies which descriptors Tor will publish when acting as a relay. You can choose multiple arguments, separated by commas.</p>
<p>If this option is set to 0, Tor will not publish its descriptors to any directories. (This is useful if you’re testing out your server, or if you’re using a Tor controller that handles directory publishing for you.) Otherwise, Tor will publish its descriptors of all type(s) specified. The default is 1, which means &ldquo;if running as a relay or bridge, publish descriptors to the appropriate authorities&rdquo;. Other possibilities are v3, meaning &ldquo;publish as if you’re a relay&rdquo;, and bridge, meaning &ldquo;publish as if you’re a bridge&rdquo;.</p>
<p><strong>ShutdownWaitLength NUM</strong></p>
<p>When we get a <code>SIGINT</code> and we’re a server, we begin shutting down: we close listeners and start refusing new circuits. After <code>NUM</code> seconds, we exit. If we get a second <code>SIGINT</code>, we exit immediately. (Default: 30 seconds)</p>
<p><strong>SSLKeyLifetime N minutes|hours|days|weeks</strong></p>
<p>When creating a link certificate for our outermost SSL handshake, set its lifetime to this amount of time. If set to 0, Tor will choose some reasonable random defaults. (Default: 0)</p>
<p><strong>HeartbeatPeriod N minutes|hours|days|weeks</strong></p>
<p>Log a heartbeat message every <code>HeartbeatPeriod</code> seconds. This is a log level notice message, designed to let you know your Tor server is still alive and doing useful things. Settings this to 0 will disable the heartbeat. Otherwise, it must be at least 30 minutes. (Default: 6 hours)</p>
<p><strong>MainloopStats 0|1</strong></p>
<p>Log main loop statistics every <code>HeartbeatPeriod</code> seconds. This is a log level notice message designed to help developers instrumenting Tor’s main event loop. (Default: 0)</p>
<p><strong>AccountingMax N bytes|KBytes|MBytes|GBytes|TBytes|KBits|MBits|GBits|TBits</strong></p>
<p>Limits the max number of bytes sent and received within a set time period using a given calculation rule (see: <code>AccountingStart</code>, <code>AccountingRule</code>). Useful if you need to stay under a specific bandwidth. By default, the number used for calculation is the max of either the bytes sent or received. For example, with <code>AccountingMax</code> set to 1 TByte, a server could send 900 GBytes and receive 800 GBytes and continue running. It will only hibernate once one of the two reaches 1 TByte. This can be changed to use the sum of the both bytes received and sent by setting the <code>AccountingRule</code> option to sum (total bandwidth in/out).</p>
<p>When the number of bytes remaining gets low, Tor will stop accepting new connections and circuits. When the number of bytes is exhausted, Tor will hibernate until some time in the next accounting period. To prevent all servers from waking at the same time, Tor will also wait until a random point in each period before waking up. If you have bandwidth cost issues, enabling hibernation is preferable to setting a low bandwidth, since it provides users with a collection of fast servers that are up some of the time, which is more useful than a set of slow servers that are always &ldquo;available&rdquo;.</p>
<p>Note that (as also described in the Bandwidth section) Tor uses powers of two, not powers of ten: 1 GByte is 1024*1024*1024, not one billion. Be careful: some internet service providers might count GBytes differently.</p>
<p><strong>AccountingRule sum|max|in|out</strong></p>
<p>How we determine when our <code>AccountingMax</code> has been reached (when we should hibernate) during a time interval. Set to max to calculate using the higher of either the sent or received bytes (this is the default functionality). Set to sum to calculate using the sent plus received bytes. Set to in to calculate using only the received bytes. Set to out to calculate using only the sent bytes. (Default: max)</p>
<p><strong>AccountingStart day|week|month [day] HH:MM</strong></p>
<p>Specify how long accounting periods last. If month is given, each accounting period runs from the time HH:MM on the dayth day of one month to the same day and time of the next. The relay will go at full speed, use all the quota you specify, then hibernate for the rest of the period. (The day must be between 1 and 28.) If week is given, each accounting period runs from the time HH:MM of the dayth day of one week to the same day and time of the next week, with Monday as day 1 and Sunday as day 7. If day is given, each accounting period runs from the time HH:MM each day to the same time on the next day. All times are local, and given in 24-hour time. (Default: &ldquo;month 1 0:00&rdquo;)</p>
<p><strong>RefuseUnknownExits 0|1|auto</strong></p>
<p>Prevent nodes that don’t appear in the consensus from exiting using this relay. If the option is 1, we always block exit attempts from such nodes; if it’s 0, we never do, and if the option is auto, then we do whatever the authorities suggest in the consensus (and block if the consensus is quiet on the issue). (Default: auto)</p>
<p><strong>ServerDNSResolvConfFile filename</strong></p>
<p>Overrides the default DNS configuration with the configuration in filename. The file format is the same as the standard Unix <code>resolv.conf</code> file (7). This option, like all other ServerDNS options, only affects name lookups that your server does on behalf of clients. (Defaults to use the system DNS configuration or a localhost DNS service in case no nameservers are found in a given configuration.)</p>
<p><strong>ServerDNSAllowBrokenConfig 0|1</strong></p>
<p>If this option is false, Tor exits immediately if there are problems parsing the system DNS configuration or connecting to nameservers. Otherwise, Tor continues to periodically retry the system nameservers until it eventually succeeds. (Default: 1)</p>
<p><strong>ServerDNSSearchDomains 0|1</strong></p>
<p>If set to 1, then we will search for addresses in the local search domain. For example, if this system is configured to believe it is in <code>example.com</code>, and a client tries to connect to <code>www</code>, the client will be connected to <code>www.example.com</code>. This option only affects name lookups that your server does on behalf of clients. (Default: 0)</p>
<p><strong>ServerDNSDetectHijacking 0|1</strong></p>
<p>When this option is set to 1, we will test periodically to determine whether our local nameservers have been configured to hijack failing DNS requests (usually to an advertising site). If they are, we will attempt to correct this. This option only affects name lookups that your server does on behalf of clients. (Default: 1)</p>
<p><strong>ServerDNSTestAddresses hostname,hostname,&hellip;</strong></p>
<p>When we’re detecting DNS hijacking, make sure that these valid addresses aren’t getting redirected. If they are, then our DNS is completely useless, and we’ll reset our exit policy to <code>reject *:*</code>. This option only affects name lookups that your server does on behalf of clients. (Default: <code>www.google.com, www.mit.edu, www.yahoo.com, www.slashdot.org</code>)</p>
<p><strong>ServerDNSAllowNonRFC953Hostnames 0|1</strong></p>
<p>When this option is disabled, Tor does not try to resolve hostnames containing illegal characters (like <code>@</code> and <code>:</code>) rather than sending them to an exit node to be resolved. This helps trap accidental attempts to resolve URLs and so on. This option only affects name lookups that your server does on behalf of clients. (Default: 0)</p>
<p><strong>BridgeRecordUsageByCountry 0|1</strong></p>
<p>When this option is enabled and BridgeRelay is also enabled, and we have GeoIP data, Tor keeps a per-country count of how many client addresses have contacted it so that it can help the bridge authority guess which countries have blocked access to it. If ExtraInfoStatistics is enabled, it will be published as part of extra-info document. (Default: 1)</p>
<p><strong>ServerDNSRandomizeCase 0|1</strong></p>
<p>When this option is set, Tor sets the case of each character randomly in outgoing DNS requests, and makes sure that the case matches in DNS replies. This so-called &ldquo;0x20 hack&rdquo; helps resist some types of DNS poisoning attack. For more information, see &ldquo;Increased DNS Forgery Resistance through 0x20-Bit Encoding&rdquo;. This option only affects name lookups that your server does on behalf of clients. (Default: 1)</p>
<p><strong>GeoIPFile filename</strong></p>
<p>A filename containing IPv4 GeoIP data, for use with by-country statistics.</p>
<p><strong>GeoIPv6File filename</strong></p>
<p>A filename containing IPv6 GeoIP data, for use with by-country statistics.</p>
<p><strong>CellStatistics 0|1</strong></p>
<p>Relays only. When this option is enabled, Tor collects statistics about cell processing (i.e. mean time a cell is spending in a queue, mean number of cells in a queue and mean number of processed cells per circuit) and writes them into disk every 24 hours. Onion router operators may use the statistics for performance monitoring. If <code>ExtraInfoStatistics</code> is enabled, it will published as part of extra-info document. (Default: 0)</p>
<p><strong>PaddingStatistics 0|1</strong></p>
<p>Relays and bridges only. When this option is enabled, Tor collects statistics for padding cells sent and received by this relay, in addition to total cell counts. These statistics are rounded, and omitted if traffic is low. This information is important for load balancing decisions related to padding. If <code>ExtraInfoStatistics</code> is enabled, it will be published as a part of extra-info document. (Default: 1)</p>
<p><strong>DirReqStatistics 0|1</strong></p>
<p>Relays and bridges only. When this option is enabled, a Tor directory writes statistics on the number and response time of network status requests to disk every 24 hours. Enables relay and bridge operators to monitor how much their server is being used by clients to learn about Tor network. If <code>ExtraInfoStatistics</code> is enabled, it will published as part of extra-info document. (Default: 1)</p>
<p><strong>EntryStatistics 0|1</strong></p>
<p>Relays only. When this option is enabled, Tor writes statistics on the number of directly connecting clients to disk every 24 hours. Enables relay operators to monitor how much inbound traffic that originates from Tor clients passes through their server to go further down the Tor network. If <code>ExtraInfoStatistics</code> is enabled, it will be published as part of extra-info document. (Default: 0)</p>
<p><strong>ExitPortStatistics 0|1</strong></p>
<p>Exit relays only. When this option is enabled, Tor writes statistics on the number of relayed bytes and opened stream per exit port to disk every 24 hours. Enables exit relay operators to measure and monitor amounts of traffic that leaves Tor network through their exit node. If <code>ExtraInfoStatistics</code> is enabled, it will be published as part of extra-info document. (Default: 0)</p>
<p><strong>ConnDirectionStatistics 0|1</strong></p>
<p>Relays only. When this option is enabled, Tor writes statistics on the amounts of traffic it passes between itself and other relays to disk every 24 hours. Enables relay operators to monitor how much their relay is being used as middle node in the circuit. If <code>ExtraInfoStatistics</code> is enabled, it will be published as part of extra-info document. (Default: 0)</p>
<p><strong>HiddenServiceStatistics 0|1</strong></p>
<p>Relays only. When this option is enabled, a Tor relay writes obfuscated statistics on its role as hidden-service directory, introduction point, or rendezvous point to disk every 24 hours. If <code>ExtraInfoStatistics</code> is also enabled, these statistics are further published to the directory authorities. (Default: 1)</p>
<p><strong>ExtraInfoStatistics 0|1</strong></p>
<p>When this option is enabled, Tor includes previously gathered statistics in its extra-info documents that it uploads to the directory authorities. Disabling this option also removes bandwidth usage statistics, and GeoIPFile and GeoIPv6File hashes from the extra-info file. Bridge <code>ServerTransportPlugin</code> lines are always includes in the extra-info file, because they are required by BridgeDB. (Default: 1)</p>
<p><strong>ExtendAllowPrivateAddresses 0|1</strong></p>
<p>When this option is enabled, Tor will connect to relays on localhost, RFC1918 addresses, and so on. In particular, Tor will make direct OR connections, and Tor routers allow EXTEND requests, to these private addresses. (Tor will always allow connections to bridges, proxies, and pluggable transports configured on private addresses.) Enabling this option can create security issues; you should probably leave it off. (Default: 0)</p>
<p><strong>MaxMemInQueues N bytes|KB|MB|GB</strong></p>
<p>This option configures a threshold above which Tor will assume that it needs to stop queueing or buffering data because it’s about to run out of memory. If it hits this threshold, it will begin killing circuits until it has recovered at least 10% of this memory. Do not set this option too low, or your relay may be unreliable under load. This option only affects some queues, so the actual process size will be larger than this. If this option is set to 0, Tor will try to pick a reasonable default based on your system’s physical memory. (Default: 0)</p>
<p><strong>DisableOOSCheck 0|1</strong></p>
<p>This option disables the code that closes connections when Tor notices that it is running low on sockets. Right now, it is on by default, since the existing out-of-sockets mechanism tends to kill OR connections more than it should. (Default: 1)</p>
<p><strong>SigningKeyLifetime N days|weeks|months</strong></p>
<p>For how long should each Ed25519 signing key be valid? Tor uses a permanent master identity key that can be kept offline, and periodically generates new &ldquo;signing&rdquo; keys that it uses online. This option configures their lifetime. (Default: 30 days)</p>
<p><strong>OfflineMasterKey 0|1</strong></p>
<p>If non-zero, the Tor relay will never generate or load its master secret key. Instead, you’ll have to use <code>tor --keygen</code> to manage the permanent ed25519 master identity key, as well as the corresponding temporary signing keys and certificates. (Default: 0)</p>
<p><strong>KeyDirectory DIR</strong></p>
<p>Store secret keys in DIR. Cannot be changed while Tor is running. (Default: the &ldquo;keys&rdquo; subdirectory of DataDirectory.)</p>
<p><strong>KeyDirectoryGroupReadable 0|1</strong></p>
<p>If this option is set to 0, don’t allow the filesystem group to read the KeywDirectory. If the option is set to 1, make the <code>KeyDirectory</code> readable by the default GID. (Default: 0)</p>
<p><strong>RephistTrackTime N seconds|minutes|hours|days|weeks</strong></p>
<p>Tells an authority, or other node tracking node reliability and history, that fine-grained information about nodes can be discarded when it hasn’t changed for a given amount of time. (Default: 24 hours)</p>
<h2 id="directory-server-options">DIRECTORY SERVER OPTIONS</h2>
<p>The following options are useful only for directory servers. (Relays with enough bandwidth automatically become directory servers; see DirCache for details.)</p>
<p><strong>DirPortFrontPage FILENAME</strong></p>
<p>When this option is set, it takes an HTML file and publishes it as <code>/</code> on the DirPort. Now relay operators can provide a disclaimer without needing to set up a separate webserver. There’s a sample disclaimer in <code>contrib/operator-tools/tor-exit-notice.html</code>.</p>
<p><strong>DirPort [address:]PORT|auto [flags]</strong></p>
<p>If this option is nonzero, advertise the directory service on this port. Set it to auto to have Tor pick a port for you. This option can occur more than once, but only one advertised <code>DirPort</code> is supported: all but one <code>DirPort</code> must have the <code>NoAdvertise</code> flag set. (Default: 0)</p>
<p>The same flags are supported here as are supported by <code>ORPort</code>.</p>
<p><strong>DirPolicy policy,policy,&hellip;</strong></p>
<p>Set an entrance policy for this server, to limit who can connect to the directory ports. The policies have the same form as exit policies above, except that port specifiers are ignored. Any address not matched by some entry in the policy is accepted.</p>
<p><strong>DirCache 0|1</strong></p>
<p>When this option is set, Tor caches all current directory documents except extra info documents, and accepts client requests for them. If <code>DownloadExtraInfo</code> is set, cached extra info documents are also cached. Setting <code>DirPort</code> is not required for <code>DirCache</code>, because clients connect via the <code>ORPort</code> by default. Setting either <code>DirPort</code> or <code>BridgeRelay</code> and setting DirCache to 0 is not supported. (Default: 1)</p>
<p><strong>MaxConsensusAgeForDiffs N minutes|hours|days|weeks</strong></p>
<p>When this option is nonzero, Tor caches will not try to generate consensus diffs for any consensus older than this amount of time. If this option is set to zero, Tor will pick a reasonable default from the current networkstatus document. You should not set this option unless your cache is severely low on disk space or CPU. If you need to set it, keeping it above 3 or 4 hours will help clients much more than setting it to zero. (Default: 0)</p>
<h2 id="denial-of-service-mitigation-options">DENIAL OF SERVICE MITIGATION OPTIONS</h2>
<p>Tor has three built-in mitigation options that can be individually enabled/disabled and fine-tuned, but by default Tor directory authorities will define reasonable values for relays and no explicit configuration is required to make use of these protections. The mitigations take place at relays, and are as follows:</p>
<ol>
<li>
<p>If a single client address makes too many concurrent connections (this is configurable via <code>DoSConnectionMaxConcurrentCount</code>), hang up on further connections.</p>
</li>
<li>
<p>If a single client IP address (v4 or v6) makes circuits too quickly (default values are more than 3 per second, with an allowed burst of 90, see <code>DoSCircuitCreationRate</code> and <code>DoSCircuitCreationBurst</code>) while also having too many connections open (default is 3, see <code>DoSCircuitCreationMinConnections</code>), tor will refuse any new circuit (CREATE cells) for the next while (random value between 1 and 2 hours).</p>
</li>
<li>
<p>If a client asks to establish a rendezvous point to you directly (ex: Tor2Web client), ignore the request.</p>
</li>
</ol>
<p>These defenses can be manually controlled by torrc options, but relays will also take guidance from consensus parameters using these same names, so there’s no need to configure anything manually. In doubt, do not change those values.</p>
<p>The values set by the consensus, if any, can be found here: <a href="https://consensus-health.torproject.org/#consensusparams">https://consensus-health.torproject.org/#consensusparams</a></p>
<p>If any of the DoS mitigations are enabled, a heartbeat message will appear in your log at NOTICE level which looks like:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">DoS mitigation since startup: 429042 circuits rejected, 17 marked addresses.

2238 connections closed. 8052 single hop clients refused.
</code></pre></div><p>The following options are useful only for a public relay. They control the Denial of Service mitigation subsystem described above.</p>
<p><strong>DoSCircuitCreationEnabled 0|1|auto</strong></p>
<p>Enable circuit creation DoS mitigation. If set to 1 (enabled), tor will cache client IPs along with statistics in order to detect circuit DoS attacks. If an address is positively identified, tor will activate defenses against the address. See the <code>DoSCircuitCreationDefenseType</code> option for more details. This is a client to relay detection only. auto means use the consensus parameter. If not defined in the consensus, the value is 0. (Default: auto)</p>
<p><strong>DoSCircuitCreationMinConnections NUM</strong></p>
<p>Minimum threshold of concurrent connections before a client address can be flagged as executing a circuit creation DoS. In other words, once a client address reaches the circuit rate and has a minimum of <code>NUM</code> concurrent connections, a detection is positive. 0 means use the consensus parameter. If not defined in the consensus, the value is 3. (Default: 0)</p>
<p><strong>DoSCircuitCreationRate NUM</strong></p>
<p>The allowed circuit creation rate per second applied per client IP address. If this option is 0, it obeys a consensus parameter. If not defined in the consensus, the value is 3. (Default: 0)</p>
<p><strong>DoSCircuitCreationBurst NUM</strong></p>
<p>The allowed circuit creation burst per client IP address. If the circuit rate and the burst are reached, a client is marked as executing a circuit creation DoS. &ldquo;0&rdquo; means use the consensus parameter. If not defined in the consensus, the value is 90. (Default: 0)</p>
<p><strong>DoSCircuitCreationDefenseType NUM</strong></p>
<p>This is the type of defense applied to a detected client address. The possible values are:</p>
<p>1: No defense.</p>
<p>2: Refuse circuit creation for the <code>DoSCircuitCreationDefenseTimePeriod</code> period of time.</p>
<p>&ldquo;0&rdquo; means use the consensus parameter. If not defined in the consensus, the value is 2. (Default: 0)</p>
<p><strong>DoSCircuitCreationDefenseTimePeriod N seconds|minutes|hours</strong></p>
<p>The base time period in seconds that the DoS defense is activated for. The actual value is selected randomly for each activation from N+1 to 3/2 * N. 0 means use the consensus parameter. If not defined in the consensus, the value is 3600 seconds (1 hour). (Default: 0)</p>
<p><strong>DoSConnectionEnabled 0|1|auto</strong></p>
<p>Enable the connection DoS mitigation. If set to 1 (enabled), for client address only, this allows tor to mitigate against large number of concurrent connections made by a single IP address. auto means use the consensus parameter. If not defined in the consensus, the value is 0. (Default: auto)</p>
<p><strong>DoSConnectionMaxConcurrentCount NUM</strong></p>
<p>The maximum threshold of concurrent connection from a client IP address. Above this limit, a defense selected by <code>DoSConnectionDefenseType</code> is applied. 0 means use the consensus parameter. If not defined in the consensus, the value is 100. (Default: 0)</p>
<p><strong>DoSConnectionDefenseType NUM</strong></p>
<p>This is the type of defense applied to a detected client address for the connection mitigation. The possible values are:</p>
<p>1: No defense.</p>
<p>2: Immediately close new connections.</p>
<p>0 means use the consensus parameter. If not defined in the consensus, the value is 2.</p>
<p>(Default: 0)</p>
<p><strong>DoSRefuseSingleHopClientRendezvous 0|1|auto</strong></p>
<p>Refuse establishment of rendezvous points for single hop clients. In other words, if a client directly connects to the relay and sends an <code>ESTABLISH_RENDEZVOUS</code> cell, it is silently dropped. auto means use the consensus parameter. If not defined in the consensus, the value is 0. (Default: auto)</p>
<h2 id="directory-authority-server-options">DIRECTORY AUTHORITY SERVER OPTIONS</h2>
<p>The following options enable operation as a directory authority, and control how Tor behaves as a directory authority. You should not need to adjust any of them if you’re running a regular relay or exit server on the public Tor network.</p>
<p><strong>AuthoritativeDirectory 0|1</strong></p>
<p>When this option is set to 1, Tor operates as an authoritative directory server. Instead of caching the directory, it generates its own list of good servers, signs it, and sends that to the clients. Unless the clients already have you listed as a trusted directory, you probably do not want to set this option.</p>
<p><strong>V3AuthoritativeDirectory 0|1</strong></p>
<p>When this option is set in addition to AuthoritativeDirectory, Tor generates version 3 network statuses and serves descriptors, etc as described in <code>dir-spec.txt</code> file of torspec (for Tor clients and servers running at least 0.2.0.x).</p>
<p><strong>VersioningAuthoritativeDirectory 0|1</strong></p>
<p>When this option is set to 1, Tor adds information on which versions of Tor are still believed safe for use to the published directory. Each version 1 authority is automatically a versioning authority; version 2 authorities provide this service optionally. See <code>RecommendedVersions</code>, <code>RecommendedClientVersions</code>, and <code>RecommendedServerVersions</code>.</p>
<p><strong>RecommendedVersions STRING</strong></p>
<p><code>STRING</code> is a comma-separated list of Tor versions currently believed to be safe. The list is included in each directory, and nodes which pull down the directory learn whether they need to upgrade. This option can appear multiple times: the values from multiple lines are spliced together. When this is set then <code>VersioningAuthoritativeDirectory</code> should be set too.</p>
<p><strong>RecommendedClientVersions STRING</strong></p>
<p><code>STRING</code> is a comma-separated list of Tor versions currently believed to be safe for clients to use. This information is included in version 2 directories. If this is not set then the value of RecommendedVersions is used. When this is set then <code>VersioningAuthoritativeDirectory</code> should be set too.</p>
<p><strong>BridgeAuthoritativeDir 0|1</strong></p>
<p>When this option is set in addition to <code>AuthoritativeDirectory</code>, Tor accepts and serves server descriptors, but it caches and serves the main networkstatus documents rather than generating its own. (Default: 0)</p>
<p><strong>MinUptimeHidServDirectoryV2 N seconds|minutes|hours|days|weeks</strong></p>
<p>Minimum uptime of a v2 hidden service directory to be accepted as such by authoritative directories. (Default: 25 hours)</p>
<p><strong>RecommendedServerVersions STRING</strong></p>
<p><code>STRING</code> is a comma-separated list of Tor versions currently believed to be safe for servers to use. This information is included in version 2 directories. If this is not set then the value of <code>RecommendedVersions</code> is used. When this is set then <code>VersioningAuthoritativeDirectory</code> should be set too.</p>
<p><strong>ConsensusParams STRING</strong></p>
<p><code>STRING</code> is a space-separated list of key=value pairs that Tor will include in the &ldquo;params&rdquo; line of its networkstatus vote.</p>
<p><strong>DirAllowPrivateAddresses 0|1</strong></p>
<p>If set to 1, Tor will accept server descriptors with arbitrary &ldquo;Address&rdquo; elements. Otherwise, if the address is not an IP address or is a private IP address, it will reject the server descriptor. Additionally, Tor will allow exit policies for private networks to fulfill Exit flag requirements. (Default: 0)</p>
<p><strong>AuthDirBadExit AddressPattern&hellip;</strong></p>
<p>Authoritative directories only. A set of address patterns for servers that will be listed as bad exits in any network status document this authority publishes, if <code>AuthDirListBadExits</code> is set.</p>
<p>(The address pattern syntax here and in the options below is the same as for exit policies, except that you don’t need to say <code>accept</code> or <code>reject</code>, and ports are not needed.)</p>
<p><strong>AuthDirInvalid AddressPattern&hellip;</strong></p>
<p>Authoritative directories only. A set of address patterns for servers that will never be listed as &ldquo;valid&rdquo; in any network status document that this authority publishes.</p>
<p><strong>AuthDirReject AddressPattern&hellip;</strong></p>
<p>Authoritative directories only. A set of address patterns for servers that will never be listed at all in any network status document that this authority publishes, or accepted as an OR address in any descriptor submitted for publication by this authority.</p>
<p><strong>AuthDirBadExitCCs CC,&hellip;</strong></p>
<p><strong>AuthDirInvalidCCs CC,&hellip;</strong></p>
<p><strong>AuthDirRejectCCs CC,&hellip;</strong></p>
<p>Authoritative directories only. These options contain a comma-separated list of country codes such that any server in one of those country codes will be marked as a bad exit/invalid for use, or rejected entirely.</p>
<p><strong>AuthDirListBadExits 0|1</strong></p>
<p>Authoritative directories only. If set to 1, this directory has some opinion about which nodes are unsuitable as exit nodes. (Do not set this to 1 unless you plan to list non-functioning exits as bad; otherwise, you are effectively voting in favor of every declared exit as an exit.)</p>
<p><strong>AuthDirMaxServersPerAddr NUM</strong></p>
<p>Authoritative directories only. The maximum number of servers that we will list as acceptable on a single IP address. Set this to 0 for no limit. (Default: 2)</p>
<p><strong>AuthDirFastGuarantee N bytes|KBytes|MBytes|GBytes|TBytes|KBits|MBits|GBits|TBits</strong></p>
<p>Authoritative directories only. If non-zero, always vote the Fast flag for any relay advertising this amount of capacity or more. (Default: 100 KBytes)</p>
<p><strong>AuthDirGuardBWGuarantee N bytes|KBytes|MBytes|GBytes|TBytes|KBits|MBits|GBits|TBits</strong></p>
<p>Authoritative directories only. If non-zero, this advertised capacity or more is always sufficient to satisfy the bandwidth requirement for the Guard flag. (Default: 2 MBytes)</p>
<p><strong>AuthDirPinKeys 0|1</strong></p>
<p>Authoritative directories only. If non-zero, do not allow any relay to publish a descriptor if any other relay has reserved its <code>&lt;Ed25519,RSA&gt;</code> identity keypair. In all cases, Tor records every keypair it accepts in a journal if it is new, or if it differs from the most recently accepted pinning for one of the keys it contains. (Default: 1)</p>
<p><strong>AuthDirSharedRandomness 0|1</strong></p>
<p>Authoritative directories only. Switch for the shared random protocol. If zero, the authority won’t participate in the protocol. If non-zero (default), the flag <code>shared-rand-participate</code> is added to the authority vote indicating participation in the protocol. (Default: 1)</p>
<p><strong>AuthDirTestEd25519LinkKeys 0|1</strong></p>
<p>Authoritative directories only. If this option is set to 0, then we treat relays as Running if their RSA key is correct when we probe them, regardless of their Ed25519 key. We should only ever set this option to 0 if there is some major bug in Ed25519 link authentication that causes us to label all the relays as not Running. (Default: 1)</p>
<p><strong>BridgePassword Password</strong></p>
<p>If set, contains an HTTP authenticator that tells a bridge authority to serve all requested bridge information. Used by the (only partially implemented) &ldquo;bridge community&rdquo; design, where a community of bridge relay operators all use an alternate bridge directory authority, and their target user audience can periodically fetch the list of available community bridges to stay up-to-date. (Default: not set)</p>
<p><strong>V3AuthVotingInterval N minutes|hours</strong></p>
<p>V3 authoritative directories only. Configures the server’s preferred voting interval. Note that voting will actually happen at an interval chosen by consensus from all the authorities' preferred intervals. This time SHOULD divide evenly into a day. (Default: 1 hour)</p>
<p><strong>V3AuthVoteDelay N minutes|hours</strong></p>
<p>V3 authoritative directories only. Configures the server’s preferred delay between publishing its vote and assuming it has all the votes from all the other authorities. Note that the actual time used is not the server’s preferred time, but the consensus of all preferences. (Default: 5 minutes)</p>
<p><strong>V3AuthDistDelay N minutes|hours</strong></p>
<p>V3 authoritative directories only. Configures the server’s preferred delay between publishing its consensus and signature and assuming it has all the signatures from all the other authorities. Note that the actual time used is not the server’s preferred time, but the consensus of all preferences. (Default: 5 minutes)</p>
<p><strong>V3AuthNIntervalsValid NUM</strong></p>
<p>V3 authoritative directories only. Configures the number of VotingIntervals for which each consensus should be valid for. Choosing high numbers increases network partitioning risks; choosing low numbers increases directory traffic. Note that the actual number of intervals used is not the server’s preferred number, but the consensus of all preferences. Must be at least 2. (Default: 3)</p>
<p><strong>V3BandwidthsFile FILENAME</strong></p>
<p>V3 authoritative directories only. Configures the location of the bandwidth-authority generated file storing information on relays' measured bandwidth capacities. To avoid inconsistent reads, bandwidth data should be written to temporary file, then renamed to the configured filename. (Default: unset)</p>
<p><strong>V3AuthUseLegacyKey 0|1</strong></p>
<p>If set, the directory authority will sign consensuses not only with its own signing key, but also with a &ldquo;legacy&rdquo; key and certificate with a different identity. This feature is used to migrate directory authority keys in the event of a compromise. (Default: 0)</p>
<p><strong>AuthDirHasIPv6Connectivity 0|1</strong></p>
<p>Authoritative directories only. When set to 0, OR ports with an IPv6 address are not included in the authority’s votes. When set to 1, IPv6 OR ports are tested for reachability like IPv4 OR ports. If the reachability test succeeds, the authority votes for the IPv6 ORPort, and votes Running for the relay. If the reachability test fails, the authority does not vote for the IPv6 ORPort, and does not vote Running (Default: 0)</p>
<p>The content of the consensus depends on the number of voting authorities that set <code>AuthDirHasIPv6Connectivity</code>:</p>
<p>If no authorities set <code>AuthDirHasIPv6Connectivity 1</code>, there will be no IPv6 ORPorts in the consensus.</p>
<p>If a minority of authorities set <code>AuthDirHasIPv6Connectivity 1</code>, unreachable IPv6 ORPorts will be removed from the consensus. But the majority of IPv4-only authorities will still vote the relay as Running. Reachable IPv6 ORPort lines will be included in the consensus</p>
<p>If a majority of voting authorities set <code>AuthDirHasIPv6Connectivity 1</code>, relays with unreachable IPv6 ORPorts will not be listed as Running. Reachable IPv6 ORPort lines will be included in the consensus</p>
<p>(To ensure that any valid majority will vote relays with unreachable IPv6 ORPorts not Running, 75% of authorities must set <code>AuthDirHasIPv6Connectivity 1</code>.)</p>
<p><strong>MinMeasuredBWsForAuthToIgnoreAdvertised N</strong></p>
<p>A total value, in abstract bandwidth units, describing how much measured total bandwidth an authority should have observed on the network before it will treat advertised bandwidths as wholly unreliable. (Default: 500)</p>
<p><strong>AuthDirRejectRequestsUnderLoad 0|1</strong></p>
<p>If set, the directory authority will start rejecting directory requests from non relay connections by sending a 503 error code if it is under bandwidth pressure (reaching the configured limit if any). Relays will always tried to be answered even if this is on. (Default: 1)</p>
<h2 id="hidden-service-options">HIDDEN SERVICE OPTIONS</h2>
<p>The following options are used to configure a hidden service. Some options apply per service and some apply for the whole tor instance.</p>
<p>The next section describes the per service options that can only be set after the HiddenServiceDir directive</p>
<h2 id="per-service-options">PER SERVICE OPTIONS:</h2>
<p><strong>HiddenServiceDir DIRECTORY</strong></p>
<p>Store data files for a hidden service in <code>DIRECTORY</code>. Every hidden service must have a separate directory. You may use this option multiple times to specify multiple services. If <code>DIRECTORY</code> does not exist, Tor will create it. Please note that you cannot add new Onion Service to already running Tor instance if Sandbox is enabled. (Note: in current versions of Tor, if <code>DIRECTORY</code> is a relative path, it will be relative to the current working directory of Tor instance, not to its DataDirectory. Do not rely on this behavior; it is not guaranteed to remain the same in future versions.)</p>
<p><strong>HiddenServicePort VIRTPORT [TARGET]</strong></p>
<p>Configure a virtual port VIRTPORT for a hidden service. You may use this option multiple times; each time applies to the service using the most recent HiddenServiceDir. By default, this option maps the virtual port to the same port on <code>127.0.0.1</code> over TCP. You may override the target port, address, or both by specifying a target of <code>addr</code>, <code>port</code>, <code>addr:port</code>, or <code>unix:path</code>. (You can specify an IPv6 target as <code>[addr]:port</code>. Unix paths may be quoted, and may use standard C escapes.) You may also have multiple lines with the same VIRTPORT: when a user connects to that VIRTPORT, one of the TARGETs from those lines will be chosen at random. Note that address-port pairs have to be comma-separated.</p>
<p><strong>HiddenServiceVersion 2|3</strong></p>
<p>A list of rendezvous service descriptor versions to publish for the hidden service. Currently, versions 2 and 3 are supported. (Default: 3)</p>
<p><strong>HiddenServiceAuthorizeClient auth-type client-name,client-name,&hellip;</strong></p>
<p>If configured, the v2 hidden service is accessible for authorized clients only. The auth-type can either be basic for a general-purpose authorization protocol or stealth for a less scalable protocol that also hides service activity from unauthorized clients. Only clients that are listed here are authorized to access the hidden service. Valid client names are 1 to 16 characters long and only use characters in A-Za-z0-9+-_ (no spaces). If this option is set, the hidden service is not accessible for clients without authorization any more. Generated authorization data can be found in the hostname file.</p>
<p>Clients need to put this authorization data in their configuration file using <code>HidServAuth</code>. This option is only for v2 services; v3 services configure client authentication in a subdirectory of <code>HiddenServiceDir</code> instead (see the Client Authorization section).</p>
<p><strong>HiddenServiceAllowUnknownPorts 0|1</strong></p>
<p>If set to 1, then connections to unrecognized ports do not cause the current hidden service to close rendezvous circuits. (Setting this to 0 is not an authorization mechanism; it is instead meant to be a mild inconvenience to port-scanners.) (Default: 0)</p>
<p><strong>HiddenServiceExportCircuitID protocol</strong></p>
<p>The onion service will use the given protocol to expose the global circuit identifier of each inbound client circuit. The only protocol supported right now &lsquo;haproxy&rsquo;. This option is only for v3 services. (Default: none)</p>
<p>The haproxy option works in the following way: when the feature is enabled, the Tor process will write a header line when a client is connecting to the onion service. The header will look like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">PROXY TCP6 fc00:dead:beef:4dad::ffff:ffff ::1 65535 42\r\n
</code></pre></div><p>We encode the &ldquo;global circuit identifier&rdquo; as the last 32-bits of the first IPv6 address. All other values in the header can safely be ignored. You can compute the global circuit identifier using the following formula given the IPv6 address <code>fc00:dead:beef:4dad::AABB:CCDD</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">global_circuit_id = (0xAA &lt;&lt; 24) + (0xBB &lt;&lt; 16) + (0xCC &lt;&lt; 8) + 0xDD;
</code></pre></div><p>In the case above, where the last 32-bits are 0xffffffff, the global circuit identifier would be <code>4294967295</code>. You can use this value together with Tor’s control port to terminate particular circuits using their global circuit identifiers. For more information about this see <code>control-spec.txt</code>.</p>
<p>The HAProxy version 1 protocol is described in detail at <a href="https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt">https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt</a></p>
<p><strong>HiddenServiceMaxStreams N</strong></p>
<p>The maximum number of simultaneous streams (connections) per rendezvous circuit. The maximum value allowed is 65535. (Setting this to 0 will allow an unlimited number of simultaneous streams.) (Default: 0)</p>
<p><strong>HiddenServiceMaxStreamsCloseCircuit 0|1</strong></p>
<p>If set to 1, then exceeding <code>HiddenServiceMaxStreams</code> will cause the offending rendezvous circuit to be torn down, as opposed to stream creation requests that exceed the limit being silently ignored. (Default: 0)</p>
<p><strong>RendPostPeriod N seconds|minutes|hours|days|weeks</strong> Every time the specified period elapses, Tor uploads any rendezvous service descriptors to the directory servers. This information is also uploaded whenever it changes. Minimum value allowed is 10 minutes and maximum is 3.5 days. This option is only for v2 services. (Default: 1 hour)</p>
<p><strong>HiddenServiceDirGroupReadable 0|1</strong></p>
<p>If this option is set to 1, allow the file system group to read the hidden service directory and hostname file. If the option is set to 0, only owner is able to read the hidden service directory. (Default: 0) Has no effect on Windows.</p>
<p><strong>HiddenServiceNumIntroductionPoints NUM</strong></p>
<p>Number of introduction points the hidden service will have. You can’t have more than 10 for v2 service and 20 for v3. (Default: 3)</p>
<p><strong>HiddenServiceEnableIntroDoSDefense 0|1</strong></p>
<p>Enable DoS defense at the intropoint level. When this is enabled, the rate and burst parameter (see below) will be sent to the intro point which will then use them to apply rate limiting for introduction request to this service. The introduction point honors the consensus parameters except if this is specifically set by the service operator using this option. The service never looks at the consensus parameters in order to enable or disable this defense. (Default: 0)</p>
<p><strong>HiddenServiceEnableIntroDoSRatePerSec NUM</strong></p>
<p>The allowed client introduction rate per second at the introduction point. If this option is 0, it is considered infinite and thus if <code>HiddenServiceEnableIntroDoSDefense</code> is set, it then effectively disables the defenses. (Default: 25)</p>
<p><strong>HiddenServiceEnableIntroDoSBurstPerSec NUM</strong></p>
<p>The allowed client introduction burst per second at the introduction point. If this option is 0, it is considered infinite and thus if <code>HiddenServiceEnableIntroDoSDefense</code> is set, it then effectively disables the defenses. (Default: 200)</p>
<h2 id="per-instance-options">PER INSTANCE OPTIONS:</h2>
<p><strong>PublishHidServDescriptors 0|1</strong></p>
<p>If set to 0, Tor will run any hidden services you configure, but it won’t advertise them to the rendezvous directory. This option is only useful if you’re using a Tor controller that handles hidserv publishing for you. (Default: 1)</p>
<p><strong>HiddenServiceSingleHopMode 0|1</strong></p>
<p>Experimental - Non Anonymous Hidden Services on a tor instance in <code>HiddenServiceSingleHopMode</code> make one-hop (direct) circuits between the onion service server, and the introduction and rendezvous points. (Onion service descriptors are still posted using 3-hop paths, to avoid onion service directories blocking the service.) This option makes every hidden service instance hosted by a tor instance a Single Onion Service. One-hop circuits make Single Onion servers easily locatable, but clients remain location-anonymous. However, the fact that a client is accessing a Single Onion rather than a Hidden Service may be statistically distinguishable.</p>
<p>WARNING: Once a hidden service directory has been used by a tor instance in <code>HiddenServiceSingleHopMode</code>, it can NEVER be used again for a hidden service. It is best practice to create a new hidden service directory, key, and address for each new Single Onion Service and Hidden Service. It is not possible to run Single Onion Services and Hidden Services from the same tor instance: they should be run on different servers with different IP addresses.</p>
<p><code>HiddenServiceSingleHopMode</code> requires <code>HiddenServiceNonAnonymousMode</code> to be set to 1. Since a Single Onion service is non-anonymous, you cannot configure a <code>SOCKSPort</code> on a tor instance that is running in <code>HiddenServiceSingleHopMode</code>. Cannot be changed while Tor is running. (Default: 0)</p>
<p><strong>HiddenServiceNonAnonymousMode 0|1</strong></p>
<p>Makes hidden services non-anonymous on this tor instance. Allows the non-anonymous <code>HiddenServiceSingleHopMode</code>. Enables direct connections in the server-side hidden service protocol. If you are using this option, you need to disable all client-side services on your Tor instance, including setting <code>SOCKSPort</code> to 0. Cannot be changed while Tor is running. (Default: 0)</p>
<h2 id="client-authorization">CLIENT AUTHORIZATION</h2>
<p>(Version 3 only)</p>
<p><em>Service side:</em></p>
<p>To configure client authorization on the service side, the <code>&lt;HiddenServiceDir&gt;/authorized_clients/</code> directory needs to exist. Each file in that directory should be suffixed with <code>.auth</code> (i.e. <code>alice.auth</code>; the file name is irrelevant) and its content format MUST be:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">&lt;auth-type&gt;:&lt;key-type&gt;:&lt;base32-encoded-public-key&gt;
</code></pre></div><p>The supported <code>&lt;auth-type&gt;</code> are: <code>descriptor</code>.</p>
<p>The supported <code>&lt;key-type&gt;</code> are: <code>x25519</code>. The <code>&lt;base32-encoded-public-key&gt;</code> is the base32 representation of the raw key bytes only (32 bytes for x25519).</p>
<p>Each file MUST contain one line only. Any malformed file will be ignored. Client authorization will only be enabled for the service if tor successfully loads at least one authorization file.</p>
<p>Note that once you&rsquo;ve configured client authorization, anyone else with the address won&rsquo;t be able to access it from this point on. If no authorization is configured, the service will be accessible to anyone with the onion address.</p>
<p>Revoking a client can be done by removing their <code>.auth</code> file, however the revocation will be in effect only after the tor process gets restarted even if a SIGHUP takes place.</p>
<p><em>Client side:</em></p>
<p>To access a v3 onion service with client authorization as a client, make sure you have <code>ClientOnionAuthDir</code> set in your <code>torrc</code>. Then, in the <code>&lt;ClientOnionAuthDir&gt;</code> directory, create an <code>.auth_private</code> file for the onion service corresponding to this key (i.e. <code>bob_onion.auth_private</code>). The contents of the <code>&lt;ClientOnionAuthDir&gt;/&lt;user&gt;.auth_private</code> file should look like:</p>
<p><code>&lt;56-char-onion-addr-without-.onion-part&gt;:descriptor:x25519:&lt;x25519 private key in base32&gt;</code></p>
<p>For more information, please see <a href="https://2019.www.torproject.org/docs/tor-onion-service.html.en#ClientAuthorization">https://2019.www.torproject.org/docs/tor-onion-service.html.en#ClientAuthorization</a>.</p>
<h2 id="testing-network-options">TESTING NETWORK OPTIONS</h2>
<p>The following options are used for running a testing Tor network.</p>
<p><strong>TestingTorNetwork 0|1</strong></p>
<p>If set to 1, Tor adjusts default values of the configuration options below, so that it is easier to set up a testing Tor network. May only be set if non-default set of DirAuthorities is set. Cannot be unset while Tor is running. (Default: 0)</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">ServerDNSAllowBrokenConfig 1
DirAllowPrivateAddresses 1
EnforceDistinctSubnets 0
AssumeReachable 1
AuthDirMaxServersPerAddr 0
AuthDirMaxServersPerAuthAddr 0
ClientBootstrapConsensusAuthorityDownloadInitialDelay 0
ClientBootstrapConsensusFallbackDownloadInitialDelay 0
ClientBootstrapConsensusAuthorityOnlyDownloadInitialDelay 0
ClientDNSRejectInternalAddresses 0
ClientRejectInternalAddresses 0
CountPrivateBandwidth 1
ExitPolicyRejectPrivate 0
ExtendAllowPrivateAddresses 1 
V3AuthVotingInterval 5 minutes
V3AuthVoteDelay 20 seconds
V3AuthDistDelay 20 seconds
MinUptimeHidServDirectoryV2 0 seconds
TestingV3AuthInitialVotingInterval 5 minutes
TestingV3AuthInitialVoteDelay 20 seconds
TestingV3AuthInitialDistDelay 20 seconds
TestingAuthDirTimeToLearnReachability 0 minutes
TestingEstimatedDescriptorPropagationTime 0 minutes 
TestingServerDownloadInitialDelay 0
TestingClientDownloadInitialDelay 0
TestingServerConsensusDownloadInitialDelay 0
TestingClientConsensusDownloadInitialDelay 0
TestingBridgeDownloadInitialDelay 10
TestingBridgeBootstrapDownloadInitialDelay 0
TestingClientMaxIntervalWithoutRequest 5 seconds
TestingDirConnectionMaxStall 30 seconds
TestingEnableConnBwEvent 1
TestingEnableCellStatsEvent 1
</code></pre></div><p><strong>TestingV3AuthInitialVotingInterval N minutes|hours</strong></p>
<p>Like <code>V3AuthVotingInterval</code>, but for initial voting interval before the first consensus has been created. Changing this requires that ``TestingTorNetwok` is set. (Default: 30 minutes)</p>
<p><strong>TestingV3AuthInitialVoteDelay N minutes|hours</strong></p>
<p>Like <code>V3AuthVoteDelay</code>, but for initial voting interval before the first consensus has been created. Changing this requires that <code>TestingTorNetwork</code> is set. (Default: 5 minutes)</p>
<p><strong>TestingV3AuthInitialDistDelay N minutes|hours</strong></p>
<p>Like <code>V3AuthDistDelay</code>, but for initial voting interval before the first consensus has been created. Changing this requires that <code>TestingTorNetwork</code> is set. (Default: 5 minutes)</p>
<p><strong>TestingV3AuthVotingStartOffset N seconds|minutes|hours</strong></p>
<p>Directory authorities offset voting start time by this much. Changing this requires that <code>TestingTorNetwork</code> is set. (Default: 0)</p>
<p><strong>TestingAuthDirTimeToLearnReachability N minutes|hours</strong></p>
<p>After starting as an authority, do not make claims about whether routers are Running until this much time has passed. Changing this requires that <code>TestingTorNetwork</code> is set. (Default: 30 minutes)</p>
<p><strong>TestingEstimatedDescriptorPropagationTime N minutes|hours</strong></p>
<p>Clients try downloading server descriptors from directory caches after this time. Changing this requires that <code>TestingTorNetwork</code> is set. (Default: 10 minutes)</p>
<p><strong>TestingMinFastFlagThreshold N bytes|KBytes|MBytes|GBytes|TBytes|KBits|MBits|GBits|TBits</strong></p>
<p>Minimum value for the Fast flag. Overrides the ordinary minimum taken from the consensus when <code>TestingTorNetwork</code> is set. (Default: 0.)</p>
<p><strong>TestingServerDownloadInitialDelay N</strong></p>
<p>Initial delay in seconds for when servers should download things in general. Changing this requires that <code>TestingTorNetwork</code> is set. (Default: 0)</p>
<p><strong>TestingClientDownloadInitialDelay N</strong></p>
<p>Initial delay in seconds for when clients should download things in general. Changing this requires that <code>TestingTorNetwork</code> is set. (Default: 0)</p>
<p><strong>TestingServerConsensusDownloadInitialDelay N</strong></p>
<p>Initial delay in seconds for when servers should download consensuses. Changing this requires that <code>TestingTorNetwork</code> is set. (Default: 0)</p>
<p><strong>TestingClientConsensusDownloadInitialDelay N</strong></p>
<p>Initial delay in seconds for when clients should download consensuses. Changing this requires that <code>TestingTorNetwork</code> is set. (Default: 0)</p>
<p><strong>TestingBridgeDownloadInitialDelay N</strong></p>
<p>Initial delay in seconds for when clients should download each bridge descriptor when they know that one or more of their configured bridges are running. Changing this requires that <code>TestingTorNetwork</code> is set. (Default: 10800)</p>
<p><strong>TestingBridgeBootstrapDownloadInitialDelay N</strong></p>
<p>Initial delay in seconds for when clients should download each bridge descriptor when they have just started, or when they can not contact any of their bridges. Changing this requires that <code>TestingTorNetwork</code> is set. (Default: 0)</p>
<p><strong>TestingClientMaxIntervalWithoutRequest N seconds|minutes</strong></p>
<p>When directory clients have only a few descriptors to request, they batch them until they have more, or until this amount of time has passed. Changing this requires that <code>TestingTorNetwork</code> is set. (Default: 10 minutes)</p>
<p><strong>TestingDirConnectionMaxStall N seconds|minutes</strong></p>
<p>Let a directory connection stall this long before expiring it. Changing this requires that <code>TestingTorNetwork</code> is set. (Default: 5 minutes)</p>
<p><strong>TestingDirAuthVoteExit node,node,&hellip;</strong></p>
<p>A list of identity fingerprints, country codes, and address patterns of nodes to vote Exit for regardless of their uptime, bandwidth, or exit policy. See the <code>ExcludeNodes</code> option for more information on how to specify nodes. In order for this option to have any effect, <code>TestingTorNetwork</code> has to be set. See the <code>ExcludeNodes</code> option for more information on how to specify nodes.</p>
<p><strong>TestingDirAuthVoteExitIsStrict 0|1</strong></p>
<p>If True (1), a node will never receive the Exit flag unless it is specified in the TestingDirAuthVoteExit list, regardless of its uptime, bandwidth, or exit policy. In order for this option to have any effect, <code>TestingTorNetwork</code> has to be set.</p>
<p><strong>TestingDirAuthVoteGuard node,node,&hellip;</strong></p>
<p>A list of identity fingerprints and country codes and address patterns of nodes to vote Guard for regardless of their uptime and bandwidth. See the <code>ExcludeNodes</code> option for more information on how to specify nodes. In order for this option to have any effect, <code>TestingTorNetwork</code> has to be set.</p>
<p><strong>TestingDirAuthVoteGuardIsStrict 0|1</strong></p>
<p>If True (1), a node will never receive the Guard flag unless it is specified in the <code>TestingDirAuthVoteGuard</code> list, regardless of its uptime and bandwidth. In order for this option to have any effect, <code>TestingTorNetwork</code> has to be set.</p>
<p><strong>TestingDirAuthVoteHSDir node,node,&hellip;</strong></p>
<p>A list of identity fingerprints and country codes and address patterns of nodes to vote HSDir for regardless of their uptime and <code>DirPort</code>. See the <code>ExcludeNodes</code> option for more information on how to specify nodes. In order for this option to have any effect, <code>TestingTorNetwork</code> must be set.</p>
<p><strong>TestingDirAuthVoteHSDirIsStrict 0|1</strong></p>
<p>If True (1), a node will never receive the HSDir flag unless it is specified in the <code>TestingDirAuthVoteHSDir</code> list, regardless of its uptime and DirPort. In order for this option to have any effect, <code>TestingTorNetwork</code> has to be set.</p>
<p><strong>TestingEnableConnBwEvent 0|1</strong></p>
<p>If this option is set, then Tor controllers may register for <code>CONN_BW</code> events. Changing this requires that <code>TestingTorNetwork</code> is set. (Default: 0)</p>
<p><strong>TestingEnableCellStatsEvent 0|1</strong></p>
<p>If this option is set, then Tor controllers may register for CELL_STATS events. Changing this requires that <code>TestingTorNetwork</code> is set. (Default: 0)</p>
<p><strong>TestingMinExitFlagThreshold N KBytes|MBytes|GBytes|TBytes|KBits|MBits|GBits|TBits</strong></p>
<p>Sets a lower-bound for assigning an exit flag when running as an authority on a testing network. Overrides the usual default lower bound of 4 KB. (Default: 0)</p>
<p><strong>TestingLinkCertLifetime N seconds|minutes|hours|days|weeks|months</strong></p>
<p>Overrides the default lifetime for the certificates used to authenticate our X509 link cert with our ed25519 signing key. (Default: 2 days)</p>
<p><strong>TestingAuthKeyLifetime N seconds|minutes|hours|days|weeks|months</strong></p>
<p>Overrides the default lifetime for a signing Ed25519 TLS Link authentication key. (Default: 2 days)</p>
<p><strong>TestingLinkKeySlop N seconds|minutes|hours</strong></p>
<p><strong>TestingAuthKeySlop N seconds|minutes|hours</strong></p>
<p><strong>TestingSigningKeySlop N seconds|minutes|hours</strong></p>
<p>How early before the official expiration of a an Ed25519 signing key do we replace it and issue a new key? (Default: 3 hours for link and auth; 1 day for signing.)</p>
<h2 id="non-persistent-options">NON-PERSISTENT OPTIONS</h2>
<p>These options are not saved to the torrc file by the <code>SAVECONF</code> controller command. Other options of this type are documented in control-spec.txt, section 5.4. End-users should mostly ignore them.</p>
<p>__ControlPort, __DirPort, __DNSPort, __ExtORPort, __NATDPort, __ORPort, __SocksPort, __TransPort</p>
<p>These underscore-prefixed options are variants of the regular Port options. They behave the same, except they are not saved to the torrc file by the controller’s <code>SAVECONF</code> command.</p>
<h2 id="signals">SIGNALS</h2>
<p>Tor catches the following signals:</p>
<p><strong>SIGTERM</strong></p>
<p>Tor will catch this, clean up and sync to disk if necessary, and exit.</p>
<p><strong>SIGINT</strong></p>
<p>Tor clients behave as with <code>SIGTERM</code>; but Tor servers will do a controlled slow shutdown, closing listeners and waiting 30 seconds before exiting. (The delay can be configured with the ShutdownWaitLength config option.)</p>
<p><strong>SIGHUP</strong></p>
<p>The signal instructs Tor to reload its configuration (including closing and reopening logs), and kill and restart its helper processes if applicable.</p>
<p><strong>SIGUSR1</strong></p>
<p>Log statistics about current connections, past connections, and throughput.</p>
<p><strong>SIGUSR2</strong></p>
<p>Switch all logs to loglevel debug. You can go back to the old loglevels by sending a SIGHUP.</p>
<p><strong>SIGCHLD</strong></p>
<p>Tor receives this signal when one of its helper processes has exited, so it can clean up.</p>
<p><strong>SIGPIPE</strong></p>
<p>Tor catches this signal and ignores it.</p>
<p><strong>SIGXFSZ</strong></p>
<p>If this signal exists on your platform, Tor catches and ignores it.</p>
<h2 id="files">FILES</h2>
<p><strong>/etc/tor/torrc</strong></p>
<p>The configuration file, which contains <code>option value</code> pairs.</p>
<p><strong>$HOME/.torrc</strong></p>
<p>Fallback location for torrc, if <code>/etc/tor/torrc</code> is not found.</p>
<p><strong>/var/lib/tor/</strong></p>
<p>The tor process stores keys and other data here.</p>
<p><strong>CacheDirectory/cached-certs</strong></p>
<p>This file holds downloaded directory key certificates that are used to verify authenticity of documents generated by Tor directory authorities.</p>
<p><strong>CacheDirectory/cached-consensus and/or cached-microdesc-consensus</strong></p>
<p>The most recent consensus network status document we’ve downloaded.</p>
<p><strong>CacheDirectory/cached-descriptors and cached-descriptors.new</strong></p>
<p>These files hold downloaded router statuses. Some routers may appear more than once; if so, the most recently published descriptor is used. Lines beginning with <code>@</code> signs are annotations that contain more information about a given router. The <code>.new</code> file is an append-only journal; when it gets too large, all entries are merged into a new cached-descriptors file.</p>
<p><strong>CacheDirectory/cached-extrainfo and cached-extrainfo.new</strong></p>
<p>As <code>cached-descriptors</code>, but holds optionally-downloaded <code>extra-info</code> documents. Relays use these documents to send inessential information about statistics, bandwidth history, and network health to the authorities. They aren’t fetched by default; see the <code>DownloadExtraInfo</code> option for more info.</p>
<p><strong>CacheDirectory/cached-microdescs and cached-microdescs.new</strong></p>
<p>These files hold downloaded microdescriptors. Lines beginning with <code>@</code> signs are annotations that contain more information about a given router. The <code>.new</code> file is an append-only journal; when it gets too large, all entries are merged into a new cached-microdescs file.</p>
<p><strong>DataDirectory/state</strong></p>
<p>A set of persistent key-value mappings. These are documented in the file. These include:</p>
<ul>
<li>The current entry guards and their status.</li>
<li>The current bandwidth accounting values.</li>
<li>When the file was last written</li>
<li>What version of Tor generated the state file</li>
<li>A short history of bandwidth usage, as produced in the server descriptors.</li>
</ul>
<p><strong>DataDirectory/sr-state</strong></p>
<p>Authority only. State file used to record information about the current status of the shared-random-value voting state.</p>
<p><strong>CacheDirectory/diff-cache</strong></p>
<p>Directory cache only. Holds older consensuses, and diffs from older consensuses to the most recent consensus of each type, compressed in various ways. Each file contains a set of key-value arguments describing its contents, followed by a single NUL byte, followed by the main file contents.</p>
<p><strong>DataDirectory/bw_accounting</strong></p>
<p>Used to track bandwidth accounting values (when the current period starts and ends; how much has been read and written so far this period). This file is obsolete, and the data is now stored in the &lsquo;state&rsquo; file instead.</p>
<p><strong>DataDirectory/control_auth_cookie</strong></p>
<p>Used for cookie authentication with the controller. Location can be overridden by the CookieAuthFile config option. Regenerated on startup. See control-spec.txt in torspec for details. Only used when cookie authentication is enabled.</p>
<p><strong>DataDirectory/lock</strong></p>
<p>This file is used to prevent two Tor instances from using same data directory. If access to this file is locked, data directory is already in use by Tor.</p>
<p><strong>DataDirectory/key-pinning-journal</strong></p>
<p>Used by authorities. A line-based file that records mappings between RSA1024 identity keys and Ed25519 identity keys. Authorities enforce these mappings, so that once a relay has picked an Ed25519 key, stealing or factoring the RSA1024 key will no longer let an attacker impersonate the relay.</p>
<p><strong>KeyDirectory/authority_identity_key</strong></p>
<p>A v3 directory authority’s master identity key, used to authenticate its signing key. Tor doesn’t use this while it’s running. The tor-gencert program uses this. If you’re running an authority, you should keep this key offline, and not actually put it here.</p>
<p><strong>KeyDirectory/authority_certificate</strong></p>
<p>A v3 directory authority’s certificate, which authenticates the authority’s current vote- and consensus-signing key using its master identity key. Only directory authorities use this file.</p>
<p><strong>KeyDirectory/authority_signing_key</strong></p>
<p>A v3 directory authority’s signing key, used to sign votes and consensuses. Only directory authorities use this file. Corresponds to the authority_certificate cert.</p>
<p><strong>KeyDirectory/legacy_certificate</strong></p>
<p>As authority_certificate: used only when V3AuthUseLegacyKey is set. See documentation for V3AuthUseLegacyKey.</p>
<p><strong>KeyDirectory/legacy_signing_key</strong></p>
<p>As authority_signing_key: used only when V3AuthUseLegacyKey is set. See documentation for V3AuthUseLegacyKey.</p>
<p><strong>KeyDirectory/secret_id_key</strong></p>
<p>A relay’s RSA1024 permanent identity key, including private and public components. Used to sign router descriptors, and to sign other keys.</p>
<p><strong>KeyDirectory/ed25519_master_id_public_key</strong></p>
<p>The public part of a relay’s Ed25519 permanent identity key.</p>
<p><strong>KeyDirectory/ed25519_master_id_secret_key</strong></p>
<p>The private part of a relay’s Ed25519 permanent identity key. This key is used to sign the medium-term ed25519 signing key. This file can be kept offline, or kept encrypted. If so, Tor will not be able to generate new signing keys itself; you’ll need to use <code>tor --keygen</code> yourself to do so.</p>
<p><strong>KeyDirectory/ed25519_signing_secret_key</strong></p>
<p>The private and public components of a relay’s medium-term Ed25519 signing key. This key is authenticated by the Ed25519 master key, in turn authenticates other keys (and router descriptors).</p>
<p><strong>KeyDirectory/ed25519_signing_cert</strong></p>
<p>The certificate which authenticates <code>ed25519_signing_secret_key</code> as having been signed by the Ed25519 master key.</p>
<p><strong>KeyDirectory/secret_onion_key and secret_onion_key.old</strong></p>
<p>A relay’s RSA1024 short-term onion key. Used to decrypt old-style (<code>TAP</code>) circuit extension requests. The <code>.old</code> file holds the previously generated key, which the relay uses to handle any requests that were made by clients that didn’t have the new one.</p>
<p><strong>KeyDirectory/secret_onion_key_ntor and secret_onion_key_ntor.old</strong></p>
<p>A relay’s Curve25519 short-term onion key. Used to handle modern (<code>ntor</code>) circuit extension requests. The <code>.old</code> file holds the previously generated key, which the relay uses to handle any requests that were made by clients that didn’t have the new one.</p>
<p><strong>DataDirectory/fingerprint</strong></p>
<p>Only used by servers. Holds the fingerprint of the server’s identity key.</p>
<p><strong>DataDirectory/hashed-fingerprint</strong></p>
<p>Only used by bridges. Holds the hashed fingerprint of the bridge’s identity key. (That is, the hash of the hash of the identity key.)</p>
<p><strong>DataDirectory/approved-routers</strong></p>
<p>Only used by authoritative directory servers. This file lists the status of routers by their identity fingerprint. Each line lists a status and a fingerprint separated by whitespace. See your fingerprint file in the DataDirectory for an example line. If the status is !reject then descriptors from the given identity (fingerprint) are rejected by this server. If it is not invalid then descriptors are accepted but marked in the directory as not valid, that is, not recommended.</p>
<p><strong>DataDirectory/v3-status-votes</strong></p>
<p>Only for v3 authoritative directory servers. This file contains status votes from all the authoritative directory servers.</p>
<p><strong>CacheDirectory/unverified-consensus</strong></p>
<p>This file contains a network consensus document that has been downloaded, but which we didn’t have the right certificates to check yet.</p>
<p><strong>CacheDirectory/unverified-microdesc-consensus</strong></p>
<p>This file contains a microdescriptor-flavored network consensus document that has been downloaded, but which we didn’t have the right certificates to check yet.</p>
<p><strong>DataDirectory/unparseable-desc</strong></p>
<p>Onion server descriptors that Tor was unable to parse are dumped to this file. Only used for debugging.</p>
<p><strong>DataDirectory/router-stability</strong></p>
<p>Only used by authoritative directory servers. Tracks measurements for router mean-time-between-failures so that authorities have a good idea of how to set their Stable flags.</p>
<p><strong>DataDirectory/stats/dirreq-stats</strong></p>
<p>Only used by directory caches and authorities. This file is used to collect directory request statistics.</p>
<p><strong>DataDirectory/stats/entry-stats</strong></p>
<p>Only used by servers. This file is used to collect incoming connection statistics by Tor entry nodes.</p>
<p><strong>DataDirectory/stats/bridge-stats</strong></p>
<p>Only used by servers. This file is used to collect incoming connection statistics by Tor bridges.</p>
<p><strong>DataDirectory/stats/exit-stats</strong></p>
<p>Only used by servers. This file is used to collect outgoing connection statistics by Tor exit routers.</p>
<p><strong>DataDirectory/stats/buffer-stats</strong></p>
<p>Only used by servers. This file is used to collect buffer usage history.</p>
<p><strong>DataDirectory/stats/conn-stats</strong></p>
<p>Only used by servers. This file is used to collect approximate connection history (number of active connections over time).</p>
<p><strong>DataDirectory/stats/hidserv-stats</strong></p>
<p>Only used by servers. This file is used to collect approximate counts of what fraction of the traffic is hidden service rendezvous traffic, and approximately how many hidden services the relay has seen.</p>
<p><strong>DataDirectory/networkstatus-bridges</strong></p>
<p>Only used by authoritative bridge directories. Contains information about bridges that have self-reported themselves to the bridge authority.</p>
<p><strong>DataDirectory/approved-routers</strong></p>
<p>Authorities only. This file is used to configure which relays are known to be valid, invalid, and so forth.</p>
<p><strong>HiddenServiceDirectory/hostname</strong></p>
<p>The <code>&lt;base32-encoded-fingerprint&gt;.onion</code> domain name for this hidden service. If the hidden service is restricted to authorized clients only, this file also contains authorization data for all clients.</p>
<p>Note that clients will ignore any extra subdomains prepended to a hidden service hostname. So if you have <code>xyz.onion</code> as your hostname, you can tell clients to connect to <code>www.xyz.onion</code> or <code>irc.xyz.onion</code> for virtual-hosting purposes.</p>
<p><strong>HiddenServiceDirectory/private_key</strong></p>
<p>The private key for this hidden service.</p>
<p><strong>HiddenServiceDirectory/client_keys</strong></p>
<p>Authorization data for a hidden service that is only accessible by authorized clients.</p>
<p><strong>HiddenServiceDirectory/onion_service_non_anonymous</strong></p>
<p>This file is present if a hidden service key was created in <code>HiddenServiceNonAnonymousMode</code>.</p>
<h2 id="see-also">SEE ALSO</h2>
<p>torsocks(1), torify(1)</p>
<p><a href="https://www.torproject.org/">https://www.torproject.org/</a></p>
<p>torspec: <a href="https://spec.torproject.org">https://spec.torproject.org</a></p>
<h2 id="bugs">BUGS</h2>
<p>Plenty, probably. Tor is still in development. Please report them at <a href="https://trac.torproject.org/">https://trac.torproject.org/</a>.</p>
<h2 id="authors">AUTHORS</h2>
<p>Roger Dingledine [arma at mit.edu], Nick Mathewson [nickm at alum.mit.edu].</p>
<p>03/18/2020</p>


        
          <div class="blog-tags">
            
              <a href="https://v2how.github.io/tags/tor/">tor</a>&nbsp;
            
          </div>
        

        
            <hr/>
            <section id="social-share">
              <div class="list-inline footer-links">
                

<div class="share-box" aria-hidden="true">
    <ul class="share">
      
      <li>
        <a href="//twitter.com/share?url=https%3a%2f%2fv2how.github.io%2fpost%2f2021-02-20-man-tor%2f&amp;text=Man%20Tor&amp;via=" target="_blank" title="Share on Twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fv2how.github.io%2fpost%2f2021-02-20-man-tor%2f" target="_blank" title="Share on Facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//reddit.com/submit?url=https%3a%2f%2fv2how.github.io%2fpost%2f2021-02-20-man-tor%2f&amp;title=Man%20Tor" target="_blank" title="Share on Reddit">
          <i class="fab fa-reddit"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fv2how.github.io%2fpost%2f2021-02-20-man-tor%2f&amp;title=Man%20Tor" target="_blank" title="Share on LinkedIn">
          <i class="fab fa-linkedin"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fv2how.github.io%2fpost%2f2021-02-20-man-tor%2f&amp;title=Man%20Tor" target="_blank" title="Share on StumbleUpon">
          <i class="fab fa-stumbleupon"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fv2how.github.io%2fpost%2f2021-02-20-man-tor%2f&amp;description=Man%20Tor" target="_blank" title="Share on Pinterest">
          <i class="fab fa-pinterest"></i>
        </a>
      </li>
    </ul>
  </div>
  

              </div>
            </section>
        

        
          
            
          

          
                  <h4 class="see-also">See also</h4>
                  <ul>
                
                
                    <li><a href="/post/2021-02-19-tor-browser-standalone-tor-ubuntu-20-04-copy/">How to Install Tor Browser or Standalone Tor on Ubuntu 20.04</a></li>
                
                    <li><a href="/post/2021-02-15-v2ray-tor-on-ramp-ubuntu-20-04/">How to Build a V2Ray Tor On-Ramp on Ubuntu 20.04</a></li>
                
              </ul>

          
        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="https://v2how.github.io/post/2021-02-19-tor-browser-standalone-tor-ubuntu-20-04-copy/" data-toggle="tooltip" data-placement="top" title="How to Install Tor Browser or Standalone Tor on Ubuntu 20.04">&larr; Previous Post</a>
            </li>
          
          
            <li class="next">
              <a href="https://v2how.github.io/post/2021-02-26-brook-server-client-ubuntu-20-04/" data-toggle="tooltip" data-placement="top" title="How to Create a Brook Server and Client on Ubuntu 20.04">Next Post &rarr;</a>
            </li>
          
        </ul>
      


      
        
        
      

    </div>
  </div>
</div>

      
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="mailto:amyw32@protonmail.com" title="Email me">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            <a href="" title="RSS">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              Amy
            
          

          &nbsp;&bull;&nbsp;&copy;
          
            2021
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://v2how.github.io">v2how</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="https://gohugo.io">Hugo v0.80.0</a> powered &nbsp;&bull;&nbsp; Theme <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a> adapted from <a href="https://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="https://v2how.github.io/js/main.js"></script>
<script src="https://v2how.github.io/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> $(document).ready(function() {$("pre.chroma").css("padding","0");}); </script><script> renderMathInElement(document.body); </script><script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script><script src="https://v2how.github.io/js/load-photoswipe.js"></script>









    
  </body>
</html>

